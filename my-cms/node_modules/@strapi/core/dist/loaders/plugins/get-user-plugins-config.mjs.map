{"version":3,"file":"get-user-plugins-config.mjs","sources":["../../../src/loaders/plugins/get-user-plugins-config.ts"],"sourcesContent":["import { join } from 'path';\nimport fse from 'fs-extra';\nimport { merge } from 'lodash/fp';\nimport { loadConfigFile } from '../../utils/load-config-file';\n\n/**\n * Return user defined plugins' config\n * first load config from `config/plugins.js`\n * and then merge config from `config/env/{env}/plugins.js`\n */\nexport const getUserPluginsConfig = async () => {\n  const globalUserConfigPath = join(strapi.dirs.dist.config, 'plugins.js');\n  const currentEnvUserConfigPath = join(\n    strapi.dirs.dist.config,\n    'env',\n    process.env.NODE_ENV as string,\n    'plugins.js'\n  );\n  let config = {};\n\n  // assign global user config if exists\n  if (await fse.pathExists(globalUserConfigPath)) {\n    config = loadConfigFile(globalUserConfigPath);\n  }\n\n  // and merge user config by environment if exists\n  if (await fse.pathExists(currentEnvUserConfigPath)) {\n    config = merge(config, loadConfigFile(currentEnvUserConfigPath));\n  }\n\n  return config;\n};\n"],"names":[],"mappings":";;;;AAUO,MAAM,uBAAuB,YAAY;AAC9C,QAAM,uBAAuB,KAAK,OAAO,KAAK,KAAK,QAAQ,YAAY;AACvE,QAAM,2BAA2B;AAAA,IAC/B,OAAO,KAAK,KAAK;AAAA,IACjB;AAAA,IACA,QAAQ,IAAI;AAAA,IACZ;AAAA,EACF;AACA,MAAI,SAAS,CAAC;AAGd,MAAI,MAAM,IAAI,WAAW,oBAAoB,GAAG;AAC9C,aAAS,eAAe,oBAAoB;AAAA,EAAA;AAI9C,MAAI,MAAM,IAAI,WAAW,wBAAwB,GAAG;AAClD,aAAS,MAAM,QAAQ,eAAe,wBAAwB,CAAC;AAAA,EAAA;AAG1D,SAAA;AACT;"}