{"version":3,"file":"plugins.mjs","sources":["../../src/registries/plugins.ts"],"sourcesContent":["import { has } from 'lodash/fp';\n\nimport type { Core } from '@strapi/types';\n\ntype PluginMap = Record<string, Core.Plugin>;\n\nconst pluginsRegistry = (strapi: Core.Strapi) => {\n  const plugins: PluginMap = {};\n\n  return {\n    get(name: string) {\n      return plugins[name];\n    },\n    getAll() {\n      return plugins;\n    },\n    add(name: string, pluginConfig: Core.Plugin) {\n      if (has(name, plugins)) {\n        throw new Error(`Plugin ${name} has already been registered.`);\n      }\n\n      const pluginModule = strapi.get('modules').add(`plugin::${name}`, pluginConfig);\n      plugins[name] = pluginModule;\n\n      return plugins[name];\n    },\n  };\n};\n\nexport default pluginsRegistry;\n"],"names":[],"mappings":";AAMM,MAAA,kBAAkB,CAAC,WAAwB;AAC/C,QAAM,UAAqB,CAAC;AAErB,SAAA;AAAA,IACL,IAAI,MAAc;AAChB,aAAO,QAAQ,IAAI;AAAA,IACrB;AAAA,IACA,SAAS;AACA,aAAA;AAAA,IACT;AAAA,IACA,IAAI,MAAc,cAA2B;AACvC,UAAA,IAAI,MAAM,OAAO,GAAG;AACtB,cAAM,IAAI,MAAM,UAAU,IAAI,+BAA+B;AAAA,MAAA;AAGzD,YAAA,eAAe,OAAO,IAAI,SAAS,EAAE,IAAI,WAAW,IAAI,IAAI,YAAY;AAC9E,cAAQ,IAAI,IAAI;AAEhB,aAAO,QAAQ,IAAI;AAAA,IAAA;AAAA,EAEvB;AACF;"}