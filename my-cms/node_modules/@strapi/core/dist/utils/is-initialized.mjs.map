{"version":3,"file":"is-initialized.mjs","sources":["../../src/utils/is-initialized.ts"],"sourcesContent":["import { isEmpty, isNil } from 'lodash/fp';\n\nimport type { Core } from '@strapi/types';\n\n/**\n * Test if the strapi application is considered as initialized (1st user has been created)\n */\nexport const isInitialized = async (strapi: Core.Strapi): Promise<boolean> => {\n  try {\n    if (isEmpty(strapi.admin)) {\n      return true;\n    }\n\n    // test if there is at least one admin\n    const anyAdministrator = await strapi.db.query('admin::user').findOne({ select: ['id'] });\n\n    return !isNil(anyAdministrator);\n  } catch (err) {\n    strapi.stopWithError(err);\n  }\n};\n"],"names":[],"mappings":";AAOa,MAAA,gBAAgB,OAAO,WAA0C;AACxE,MAAA;AACE,QAAA,QAAQ,OAAO,KAAK,GAAG;AAClB,aAAA;AAAA,IAAA;AAIT,UAAM,mBAAmB,MAAM,OAAO,GAAG,MAAM,aAAa,EAAE,QAAQ,EAAE,QAAQ,CAAC,IAAI,GAAG;AAEjF,WAAA,CAAC,MAAM,gBAAgB;AAAA,WACvB,KAAK;AACZ,WAAO,cAAc,GAAG;AAAA,EAAA;AAE5B;"}