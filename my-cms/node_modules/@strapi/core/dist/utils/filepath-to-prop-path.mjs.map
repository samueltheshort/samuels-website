{"version":3,"file":"filepath-to-prop-path.mjs","sources":["../../src/utils/filepath-to-prop-path.ts"],"sourcesContent":["import path from 'node:path';\nimport fp from 'lodash/fp';\n\n/**\n * Returns a path (as an array) from a file path\n */\nexport const filePathToPropPath = (\n  entryPath: string,\n  useFileNameAsKey: boolean = true\n): string[] => {\n  const transform = fp.pipe(\n    // Remove the relative path prefixes: './' for posix (and some win32) and \".\\\" for win32\n    removeRelativePrefix,\n    // Remove the path metadata and extensions\n    fp.replace(/(\\.settings|\\.json|\\.js)/g, ''),\n    // Transform to lowercase\n    // Note: We're using fp.toLower instead of fp.lowercase as the latest removes special characters such as \"/\"\n    fp.toLower,\n    // Split the cleaned path by matching every possible separator (either \"/\" or \"\\\" depending on the OS)\n    fp.split(new RegExp(`[\\\\${path.win32.sep}|${path.posix.sep}]`, 'g')),\n    // Make sure to remove leading '.' from the different path parts\n    fp.map(fp.trimCharsStart('.')),\n    // join + split in case some '.' characters are still present in different parts of the path\n    fp.join('.'),\n    fp.split('.'),\n    // Remove the last portion of the path array if the file name shouldn't be used as a key\n    useFileNameAsKey ? fp.identity : fp.slice(0, -1)\n  );\n\n  return transform(entryPath) as string[];\n};\n\nconst removeRelativePrefix = (filePath: string) => {\n  return filePath.startsWith(`.${path.win32.sep}`) || filePath.startsWith(`.${path.posix.sep}`)\n    ? filePath.slice(2)\n    : filePath;\n};\n"],"names":[],"mappings":";;AAMO,MAAM,qBAAqB,CAChC,WACA,mBAA4B,SACf;AACb,QAAM,YAAY,GAAG;AAAA;AAAA,IAEnB;AAAA;AAAA,IAEA,GAAG,QAAQ,6BAA6B,EAAE;AAAA;AAAA;AAAA,IAG1C,GAAG;AAAA;AAAA,IAEH,GAAG,MAAM,IAAI,OAAO,MAAM,KAAK,MAAM,GAAG,IAAI,KAAK,MAAM,GAAG,KAAK,GAAG,CAAC;AAAA;AAAA,IAEnE,GAAG,IAAI,GAAG,eAAe,GAAG,CAAC;AAAA;AAAA,IAE7B,GAAG,KAAK,GAAG;AAAA,IACX,GAAG,MAAM,GAAG;AAAA;AAAA,IAEZ,mBAAmB,GAAG,WAAW,GAAG,MAAM,GAAG,EAAE;AAAA,EACjD;AAEA,SAAO,UAAU,SAAS;AAC5B;AAEA,MAAM,uBAAuB,CAAC,aAAqB;AACjD,SAAO,SAAS,WAAW,IAAI,KAAK,MAAM,GAAG,EAAE,KAAK,SAAS,WAAW,IAAI,KAAK,MAAM,GAAG,EAAE,IACxF,SAAS,MAAM,CAAC,IAChB;AACN;"}