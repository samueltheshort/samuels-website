{"version":3,"file":"data.js","sources":["../../../../src/services/document-service/transform/data.ts"],"sourcesContent":["import { createIdMap } from './id-map';\nimport { extractDataIds as extractDataRelationIds } from './relations/extract/data-ids';\nimport { transformDataIdsVisitor as transformRelationDataIds } from './relations/transform/data-ids';\nimport { setDefaultLocaleToRelations } from './relations/transform/default-locale';\n\n/**\n * Transforms input data, containing relation document ids, to entity ids.\n */\nexport const transformData = async (data: any, opts: any) => {\n  const idMap = createIdMap({ strapi });\n\n  // Assign default locales\n  const transformedData = await setDefaultLocaleToRelations(data, opts.uid);\n\n  // Extract any relation ids from the input\n  await extractDataRelationIds(idMap, transformedData, opts);\n\n  // Load any relation the extract methods found\n  await idMap.load();\n\n  // Transform any relation ids to entity ids\n  return transformRelationDataIds(idMap, transformedData, opts);\n};\n"],"names":["idMap","createIdMap","setDefaultLocaleToRelations","extractDataRelationIds","transformRelationDataIds"],"mappings":";;;;;;AAQa,MAAA,gBAAgB,OAAO,MAAW,SAAc;AAC3D,QAAMA,UAAQC,MAAAA,YAAY,EAAE,QAAQ;AAGpC,QAAM,kBAAkB,MAAMC,cAAAA,4BAA4B,MAAM,KAAK,GAAG;AAGlE,QAAAC,uBAAuBH,SAAO,iBAAiB,IAAI;AAGzD,QAAMA,QAAM,KAAK;AAGV,SAAAI,kCAAyBJ,SAAO,iBAAiB,IAAI;AAC9D;;"}