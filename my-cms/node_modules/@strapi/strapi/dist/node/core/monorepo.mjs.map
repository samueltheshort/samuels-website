{"version":3,"file":"monorepo.mjs","sources":["../../../src/node/core/monorepo.ts"],"sourcesContent":["import path from 'path';\nimport readPkgUp from 'read-pkg-up';\n\ninterface StrapiMonorepo {\n  path: string;\n}\n\n/**\n * Load information about the strapi CMS monorepo (if applicable)\n *\n * @internal\n */\nasync function loadStrapiMonorepo(cwd: string): Promise<StrapiMonorepo | undefined> {\n  let p = cwd;\n\n  while (p !== '/') {\n    const readResult = await readPkgUp({ cwd: p });\n\n    if (!readResult) {\n      return undefined;\n    }\n\n    if (readResult.packageJson.isStrapiMonorepo) {\n      return { path: path.dirname(readResult.path) };\n    }\n\n    p = path.dirname(path.dirname(readResult.path));\n  }\n\n  return undefined;\n}\n\nexport { loadStrapiMonorepo };\nexport type { StrapiMonorepo };\n"],"names":[],"mappings":";;AAYA,eAAe,mBAAmB,KAAkD;AAClF,MAAI,IAAI;AAER,SAAO,MAAM,KAAK;AAChB,UAAM,aAAa,MAAM,UAAU,EAAE,KAAK,GAAG;AAE7C,QAAI,CAAC,YAAY;AACR,aAAA;AAAA,IAAA;AAGL,QAAA,WAAW,YAAY,kBAAkB;AAC3C,aAAO,EAAE,MAAM,KAAK,QAAQ,WAAW,IAAI,EAAE;AAAA,IAAA;AAG/C,QAAI,KAAK,QAAQ,KAAK,QAAQ,WAAW,IAAI,CAAC;AAAA,EAAA;AAGzC,SAAA;AACT;"}