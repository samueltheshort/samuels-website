{"version":3,"file":"build.js","sources":["../../../src/cli/commands/build.ts"],"sourcesContent":["import { createCommand } from 'commander';\nimport type { StrapiCommand } from '../types';\n\nimport { build as nodeBuild, BuildOptions } from '../../node/build';\nimport { handleUnexpectedError } from '../../node/core/errors';\n\ntype BuildCLIOptions = BuildOptions;\n\nconst action = async (options: BuildCLIOptions) => {\n  try {\n    if (options.bundler === 'webpack') {\n      options.logger.warn(\n        '[@strapi/strapi]: Using webpack as a bundler is deprecated. You should migrate to vite.'\n      );\n    }\n\n    await nodeBuild(options);\n  } catch (err) {\n    handleUnexpectedError(err);\n  }\n};\n\n/**\n * `$ strapi build`\n */\nconst command: StrapiCommand = ({ ctx }) => {\n  return createCommand('build')\n    .option('--bundler [bundler]', 'Bundler to use (webpack or vite)', 'vite')\n    .option('-d, --debug', 'Enable debugging mode with verbose logs', false)\n    .option('--minify', 'Minify the output', true)\n    .option('--silent', \"Don't log anything\", false)\n    .option('--sourcemap', 'Produce sourcemaps', false)\n    .option('--stats', 'Print build statistics to the console', false)\n    .description('Build the strapi admin app')\n    .action(async (options: BuildCLIOptions) => {\n      return action({ ...options, ...ctx });\n    });\n};\n\nexport { command };\n"],"names":["nodeBuild","handleUnexpectedError","createCommand"],"mappings":";;;;;AAQA,MAAM,SAAS,OAAO,YAA6B;AAC7C,MAAA;AACE,QAAA,QAAQ,YAAY,WAAW;AACjC,cAAQ,OAAO;AAAA,QACb;AAAA,MACF;AAAA,IAAA;AAGF,UAAMA,MAAAA,MAAU,OAAO;AAAA,WAChB,KAAK;AACZC,WAAAA,sBAAsB,GAAG;AAAA,EAAA;AAE7B;AAKA,MAAM,UAAyB,CAAC,EAAE,UAAU;AAC1C,SAAOC,UAAAA,cAAc,OAAO,EACzB,OAAO,uBAAuB,oCAAoC,MAAM,EACxE,OAAO,eAAe,2CAA2C,KAAK,EACtE,OAAO,YAAY,qBAAqB,IAAI,EAC5C,OAAO,YAAY,sBAAsB,KAAK,EAC9C,OAAO,eAAe,sBAAsB,KAAK,EACjD,OAAO,WAAW,yCAAyC,KAAK,EAChE,YAAY,4BAA4B,EACxC,OAAO,OAAO,YAA6B;AAC1C,WAAO,OAAO,EAAE,GAAG,SAAS,GAAG,KAAK;AAAA,EAAA,CACrC;AACL;;"}