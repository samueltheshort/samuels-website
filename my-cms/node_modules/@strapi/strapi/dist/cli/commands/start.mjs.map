{"version":3,"file":"start.mjs","sources":["../../../src/cli/commands/start.ts"],"sourcesContent":["import { createCommand } from 'commander';\nimport fs from 'fs';\nimport tsUtils from '@strapi/typescript-utils';\nimport { createStrapi } from '@strapi/core';\n\nimport type { StrapiCommand } from '../types';\nimport { runAction } from '../utils/helpers';\n\nconst action = async () => {\n  const appDir = process.cwd();\n\n  const isTSProject = await tsUtils.isUsingTypeScript(appDir);\n\n  const outDir = await tsUtils.resolveOutDir(appDir);\n  const distDir = isTSProject ? outDir : appDir;\n\n  const buildDirExists = fs.existsSync(outDir);\n  if (isTSProject && !buildDirExists)\n    throw new Error(\n      `${outDir} directory not found. Please run the build command before starting your application`\n    );\n\n  createStrapi({ appDir, distDir }).start();\n};\n\n/**\n * `$ strapi start`\n */\nconst command: StrapiCommand = () => {\n  return createCommand('start')\n    .description('Start your Strapi application')\n    .action(runAction('start', action));\n};\n\nexport { command };\n"],"names":["tsUtils"],"mappings":";;;;;AAQA,MAAM,SAAS,YAAY;AACnB,QAAA,SAAS,QAAQ,IAAI;AAE3B,QAAM,cAAc,MAAMA,iBAAQ,kBAAkB,MAAM;AAE1D,QAAM,SAAS,MAAMA,iBAAQ,cAAc,MAAM;AAC3C,QAAA,UAAU,cAAc,SAAS;AAEjC,QAAA,iBAAiB,GAAG,WAAW,MAAM;AAC3C,MAAI,eAAe,CAAC;AAClB,UAAM,IAAI;AAAA,MACR,GAAG,MAAM;AAAA,IACX;AAEF,eAAa,EAAE,QAAQ,QAAS,CAAA,EAAE,MAAM;AAC1C;AAKA,MAAM,UAAyB,MAAM;AAC5B,SAAA,cAAc,OAAO,EACzB,YAAY,+BAA+B,EAC3C,OAAO,UAAU,SAAS,MAAM,CAAC;AACtC;"}