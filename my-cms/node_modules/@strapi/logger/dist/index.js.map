{"version":3,"file":"index.js","sources":["../src/constants.ts","../src/formats/log-errors.ts","../src/formats/pretty-print.ts","../src/formats/level-filter.ts","../src/formats/exclude-colors.ts","../src/formats/detailed-log.ts","../src/configs/default-configuration.ts","../src/configs/output-file-configuration.ts","../src/index.ts"],"sourcesContent":["import { config } from 'winston';\n\nconst LEVELS = config.npm.levels;\nconst LEVEL_LABEL = 'silly';\nconst LEVEL = LEVELS[LEVEL_LABEL];\n\nexport { LEVEL, LEVEL_LABEL, LEVELS };\n","import { format, Logform } from 'winston';\n\nconst logErrors: Logform.FormatWrap = format((info) => {\n  if (info instanceof Error) {\n    return { ...info, message: `${info.message as string}${info.stack ? `\\n${info.stack}` : ''}` };\n  }\n\n  return info;\n});\n\nexport default logErrors;\n","import { format, Logform } from 'winston';\nimport logErrors from './log-errors';\n\nconst defaultTimestampFormat = 'YYYY-MM-DD HH:mm:ss.SSS';\n\nexport interface PrettyPrintOptions {\n  /**\n   * Enable or disable timestamps print if it's a boolean value. Use the given format for the timestamps if it's a string\n   */\n  timestamps?: Logform.TimestampOptions['format'] | boolean;\n  /**\n   * Enable or disable the use of colors for the log level\n   */\n  colors?: boolean;\n}\n\n/**\n * Create a pretty print formatter for a winston logger\n * @param options\n */\nexport default (options: PrettyPrintOptions = {}): Logform.Format => {\n  const { timestamps = true, colors = true } = options;\n\n  const handlers: Logform.Format[] = [];\n\n  if (timestamps) {\n    handlers.push(\n      format.timestamp({\n        format: timestamps === true ? defaultTimestampFormat : timestamps,\n      })\n    );\n  }\n\n  if (colors) {\n    handlers.push(format.colorize());\n  }\n\n  handlers.push(logErrors());\n\n  handlers.push(\n    format.printf(({ level, message, timestamp }) => {\n      return `${timestamps ? `[${timestamp as string}] ` : ''}${level}: ${message as string}`;\n    })\n  );\n\n  return format.combine(...handlers);\n};\n","import { format } from 'winston';\n\nexport default (...levels: string[]) => {\n  return format((info) => (levels.some((level) => info.level.includes(level)) ? info : false))();\n};\n","import { format } from 'winston';\n\n/**\n * This will remove the chalk color codes from the message provided.\n * It's used to log plain text in the log file\n */\nexport default format.printf(({ message }) => {\n  if (typeof message !== 'string') {\n    return message;\n  }\n\n  return message.replace(\n    // eslint-disable-next-line no-control-regex\n    /[\\u001b\\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,\n    ''\n  );\n});\n","import { format } from 'winston';\n\n/**\n * This will remove the chalk color codes from the message provided.\n * It's used to log plain text in the log file\n */\nexport default format.printf(({ message, level, timestamp }) => {\n  if (typeof message !== 'string') {\n    return message;\n  }\n\n  const newMessage = `[${timestamp as string}] ${level}: ${message as string}`;\n\n  return newMessage.replace(\n    // eslint-disable-next-line no-control-regex\n    /[\\u001b\\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,\n    ''\n  );\n});\n","import { transports, LoggerOptions } from 'winston';\nimport { LEVEL_LABEL, LEVELS } from '../constants';\nimport { prettyPrint } from '../formats';\n\nexport default (): LoggerOptions => {\n  return {\n    level: LEVEL_LABEL,\n    levels: LEVELS,\n    format: prettyPrint(),\n    transports: [new transports.Console()],\n  };\n};\n","import { transports, LoggerOptions } from 'winston';\n\nimport { LEVEL_LABEL, LEVELS } from '../constants';\nimport { prettyPrint, excludeColors } from '../formats';\n\nexport default (\n  filename: string,\n  fileTransportOptions: transports.FileTransportOptions = {}\n): LoggerOptions => {\n  return {\n    level: LEVEL_LABEL,\n    levels: LEVELS,\n    format: prettyPrint(),\n    transports: [\n      new transports.Console(),\n      new transports.File({\n        level: 'error',\n        filename,\n        format: excludeColors,\n        ...fileTransportOptions,\n      }),\n    ],\n  };\n};\n","import * as winston from 'winston';\nimport * as configs from './configs';\n\nexport * as formats from './formats';\n\nexport type Logger = winston.Logger;\n\nconst createLogger = (userConfiguration: winston.LoggerOptions = {}): winston.Logger => {\n  const configuration = configs.createDefaultConfiguration();\n\n  Object.assign(configuration, userConfiguration);\n\n  return winston.createLogger(configuration);\n};\n\nexport { createLogger, winston, configs };\n"],"names":["config","format","transports","configs.createDefaultConfiguration","winston"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAEA,MAAM,SAASA,QAAAA,OAAO,IAAI;AAC1B,MAAM,cAAc;AACN,OAAO,WAAW;ACFhC,MAAM,YAAgCC,QAAAA,OAAO,CAAC,SAAS;AACrD,MAAI,gBAAgB,OAAO;AAClB,WAAA,EAAE,GAAG,MAAM,SAAS,GAAG,KAAK,OAAiB,GAAG,KAAK,QAAQ;AAAA,EAAK,KAAK,KAAK,KAAK,EAAE,GAAG;AAAA,EAAA;AAGxF,SAAA;AACT,CAAC;ACLD,MAAM,yBAAyB;AAiB/B,MAAA,cAAe,CAAC,UAA8B,CAAA,MAAuB;AACnE,QAAM,EAAE,aAAa,MAAM,SAAS,KAAS,IAAA;AAE7C,QAAM,WAA6B,CAAC;AAEpC,MAAI,YAAY;AACL,aAAA;AAAA,MACPA,QAAAA,OAAO,UAAU;AAAA,QACf,QAAQ,eAAe,OAAO,yBAAyB;AAAA,MACxD,CAAA;AAAA,IACH;AAAA,EAAA;AAGF,MAAI,QAAQ;AACD,aAAA,KAAKA,eAAO,UAAU;AAAA,EAAA;AAGxB,WAAA,KAAK,WAAW;AAEhB,WAAA;AAAA,IACPA,eAAO,OAAO,CAAC,EAAE,OAAO,SAAS,gBAAgB;AACxC,aAAA,GAAG,aAAa,IAAI,SAAmB,OAAO,EAAE,GAAG,KAAK,KAAK,OAAiB;AAAA,IACtF,CAAA;AAAA,EACH;AAEO,SAAAA,QAAA,OAAO,QAAQ,GAAG,QAAQ;AACnC;AC5CA,MAAe,cAAA,IAAI,WAAqB;AACtC,SAAOA,QAAO,OAAA,CAAC,SAAU,OAAO,KAAK,CAAC,UAAU,KAAK,MAAM,SAAS,KAAK,CAAC,IAAI,OAAO,KAAM,EAAE;AAC/F;ACEA,MAAeA,gBAAAA,QAAAA,OAAO,OAAO,CAAC,EAAE,cAAc;AACxC,MAAA,OAAO,YAAY,UAAU;AACxB,WAAA;AAAA,EAAA;AAGT,SAAO,QAAQ;AAAA;AAAA,IAEb;AAAA,IACA;AAAA,EACF;AACF,CAAC;ACVD,MAAA,cAAeA,eAAO,OAAO,CAAC,EAAE,SAAS,OAAO,gBAAgB;AAC1D,MAAA,OAAO,YAAY,UAAU;AACxB,WAAA;AAAA,EAAA;AAGT,QAAM,aAAa,IAAI,SAAmB,KAAK,KAAK,KAAK,OAAiB;AAE1E,SAAO,WAAW;AAAA;AAAA,IAEhB;AAAA,IACA;AAAA,EACF;AACF,CAAC;;;;;;;;ACdD,MAAA,uBAAe,MAAqB;AAC3B,SAAA;AAAA,IACL,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,QAAQ,YAAY;AAAA,IACpB,YAAY,CAAC,IAAIC,QAAA,WAAW,QAAS,CAAA;AAAA,EACvC;AACF;ACNA,MAAA,0BAAe,CACb,UACA,uBAAwD,OACtC;AACX,SAAA;AAAA,IACL,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,QAAQ,YAAY;AAAA,IACpB,YAAY;AAAA,MACV,IAAIA,QAAAA,WAAW,QAAQ;AAAA,MACvB,IAAIA,QAAAA,WAAW,KAAK;AAAA,QAClB,OAAO;AAAA,QACP;AAAA,QACA,QAAQ;AAAA,QACR,GAAG;AAAA,MACJ,CAAA;AAAA,IAAA;AAAA,EAEL;AACF;;;;;;AChBA,MAAM,eAAe,CAAC,oBAA2C,OAAuB;AAChF,QAAA,gBAAgBC,qBAAmC;AAElD,SAAA,OAAO,eAAe,iBAAiB;AAEvC,SAAAC,mBAAQ,aAAa,aAAa;AAC3C;;;;;"}