var Kr=Object.create;var _t=Object.defineProperty;var Yr=Object.getOwnPropertyDescriptor;var Xr=Object.getOwnPropertyNames;var $r=Object.getPrototypeOf,Zr=Object.prototype.hasOwnProperty;var ft=function(r,e){return function(){return r&&(e=r(r=0)),e}};var B=function(r,e){return function(){return e||r((e={exports:{}}).exports,e),e.exports}};var ea=function(r,e,t,i){if(e&&typeof e=="object"||typeof e=="function")for(var a=Xr(e),n=0,o=a.length,s;n<o;n++)s=a[n],!Zr.call(r,s)&&s!==t&&_t(r,s,{get:function(u){return e[u]}.bind(null,s),enumerable:!(i=Yr(e,s))||i.enumerable});return r};var G=function(r,e,t){return t=r!=null?Kr($r(r)):{},ea(e||!r||!r.__esModule?_t(t,"default",{value:r,enumerable:!0}):t,r)};var J=B(function(Wi,ht){var xe;typeof window!="undefined"?xe=window:typeof global!="undefined"?xe=global:typeof self!="undefined"?xe=self:xe={};ht.exports=xe});function U(r,e){return e!=null&&typeof Symbol!="undefined"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](r):U(r,e)}var te=ft(function(){te()});function Ne(r){"@swc/helpers - typeof";return r&&typeof Symbol!="undefined"&&r.constructor===Symbol?"symbol":typeof r}var Je=ft(function(){});var Ye=B(function(xu,mr){var vr=Array.prototype.slice;mr.exports=Qa;function Qa(r,e){for(("length"in r)||(r=[r]),r=vr.call(r);r.length;){var t=r.shift(),i=e(t);if(i)return i;t.childNodes&&t.childNodes.length&&(r=vr.call(t.childNodes).concat(r))}}});var yr=B(function(Su,hr){te();hr.exports=me;function me(r,e){if(!U(this,me))return new me(r,e);this.data=r,this.nodeValue=r,this.length=r.length,this.ownerDocument=e||null}me.prototype.nodeType=8;me.prototype.nodeName="#comment";me.prototype.toString=function(){return"[object Comment]"}});var br=B(function(qu,gr){te();gr.exports=ie;function ie(r,e){if(!U(this,ie))return new ie(r);this.data=r||"",this.length=this.data.length,this.ownerDocument=e||null}ie.prototype.type="DOMTextNode";ie.prototype.nodeType=3;ie.prototype.nodeName="#text";ie.prototype.toString=function(){return this.data};ie.prototype.replaceData=function(e,t,i){var a=this.data,n=a.substring(0,e),o=a.substring(e+t,a.length);this.data=n+i+o,this.length=this.data.length}});var Xe=B(function(Au,Tr){Tr.exports=za;function za(r){var e=this,t=r.type;r.target||(r.target=e),e.listeners||(e.listeners={});var i=e.listeners[t];if(i)return i.forEach(function(a){r.currentTarget=e,typeof a=="function"?a(r):a.handleEvent(r)});e.parentNode&&e.parentNode.dispatchEvent(r)}});var $e=B(function(Ou,wr){wr.exports=Ka;function Ka(r,e){var t=this;t.listeners||(t.listeners={}),t.listeners[r]||(t.listeners[r]=[]),t.listeners[r].indexOf(e)===-1&&t.listeners[r].push(e)}});var Ze=B(function(Iu,Er){Er.exports=Ya;function Ya(r,e){var t=this;if(t.listeners&&t.listeners[r]){var i=t.listeners[r],a=i.indexOf(e);a!==-1&&i.splice(a,1)}}});var Sr=B(function(Nu,Dr){Je();Dr.exports=kr;var Xa=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function kr(r){switch(r.nodeType){case 3:return et(r.data);case 8:return"<!--"+r.data+"-->";default:return $a(r)}}function $a(r){var e=[],t=r.tagName;return r.namespaceURI==="http://www.w3.org/1999/xhtml"&&(t=t.toLowerCase()),e.push("<"+t+ri(r)+ti(r)),Xa.indexOf(t)>-1?e.push(" />"):(e.push(">"),r.childNodes.length?e.push.apply(e,r.childNodes.map(kr)):r.textContent||r.innerText?e.push(et(r.textContent||r.innerText)):r.innerHTML&&e.push(r.innerHTML),e.push("</"+t+">")),e.join("")}function Za(r,e){var t=Ne(r[e]);return e==="style"&&Object.keys(r.style).length>0?!0:r.hasOwnProperty(e)&&(t==="string"||t==="boolean"||t==="number")&&e!=="nodeName"&&e!=="className"&&e!=="tagName"&&e!=="textContent"&&e!=="innerText"&&e!=="namespaceURI"&&e!=="innerHTML"}function ei(r){if(typeof r=="string")return r;var e="";return Object.keys(r).forEach(function(t){var i=r[t];t=t.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}),e+=t+":"+i+";"}),e}function ti(r){var e=r.dataset,t=[];for(var i in e)t.push({name:"data-"+i,value:e[i]});return t.length?xr(t):""}function xr(r){var e=[];return r.forEach(function(t){var i=t.name,a=t.value;i==="style"&&(a=ei(a)),e.push(i+'="'+ai(a)+'"')}),e.length?" "+e.join(" "):""}function ri(r){var e=[];for(var t in r)Za(r,t)&&e.push({name:t,value:r[t]});for(var i in r._attributes)for(var a in r._attributes[i]){var n=r._attributes[i][a],o=(n.prefix?n.prefix+":":"")+a;e.push({name:o,value:n.value})}return r.className&&e.push({name:"class",value:r.className}),e.length?xr(e):""}function et(r){var e="";return typeof r=="string"?e=r:r&&(e=r.toString()),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ai(r){return et(r).replace(/"/g,"&quot;")}});var rt=B(function(Cu,qr){te();var tt=Ye(),ii=Xe(),ni=$e(),oi=Ze(),si=Sr(),Rr="http://www.w3.org/1999/xhtml";qr.exports=P;function P(r,e,t){if(!U(this,P))return new P(r);var i=t===void 0?Rr:t||null;this.tagName=i===Rr?String(r).toUpperCase():r,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=e||null,this.namespaceURI=i,this._attributes={},this.tagName==="INPUT"&&(this.type="text")}P.prototype.type="DOMElement";P.prototype.nodeType=1;P.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e};P.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var i=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[i]=e,e.parentNode=this,t};P.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e};P.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var i=t==null?-1:this.childNodes.indexOf(t);return i>-1?this.childNodes.splice(i,0,e):this.childNodes.push(e),e.parentNode=this,e};P.prototype.setAttributeNS=function(e,t,i){var a=null,n=t,o=t.indexOf(":");if(o>-1&&(a=t.substr(0,o),n=t.substr(o+1)),this.tagName==="INPUT"&&t==="type")this.type=i;else{var s=this._attributes[e]||(this._attributes[e]={});s[n]={value:i,prefix:a}}};P.prototype.getAttributeNS=function(e,t){var i=this._attributes[e],a=i&&i[t]&&i[t].value;return this.tagName==="INPUT"&&t==="type"?this.type:typeof a!="string"?null:a};P.prototype.removeAttributeNS=function(e,t){var i=this._attributes[e];i&&delete i[t]};P.prototype.hasAttributeNS=function(e,t){var i=this._attributes[e];return!!i&&t in i};P.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)};P.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)};P.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)};P.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)};P.prototype.removeEventListener=oi;P.prototype.addEventListener=ni;P.prototype.dispatchEvent=ii;P.prototype.focus=function(){};P.prototype.toString=function(){return si(this)};P.prototype.getElementsByClassName=function(e){var t=e.split(" "),i=[];return tt(this,function(a){if(a.nodeType===1){var n=a.className||"",o=n.split(" ");t.every(function(s){return o.indexOf(s)!==-1})&&i.push(a)}}),i};P.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return tt(this.childNodes,function(i){i.nodeType===1&&(e==="*"||i.tagName.toLowerCase()===e)&&t.push(i)}),t};P.prototype.contains=function(e){return tt(this,function(t){return e===t})||!1}});var Or=B(function(Hu,Ar){te();var at=rt();Ar.exports=K;function K(r){if(!U(this,K))return new K;this.childNodes=[],this.parentNode=null,this.ownerDocument=r||null}K.prototype.type="DocumentFragment";K.prototype.nodeType=11;K.prototype.nodeName="#document-fragment";K.prototype.appendChild=at.prototype.appendChild;K.prototype.replaceChild=at.prototype.replaceChild;K.prototype.removeChild=at.prototype.removeChild;K.prototype.toString=function(){return this.childNodes.map(function(e){return String(e)}).join("")}});var Pr=B(function(Bu,Ir){Ir.exports=it;function it(r){}it.prototype.initEvent=function(e,t,i){this.type=e,this.bubbles=t,this.cancelable=i};it.prototype.preventDefault=function(){}});var Lr=B(function(Fu,Nr){te();var ui=Ye(),di=yr(),li=br(),Re=rt(),ci=Or(),_i=Pr(),fi=Xe(),pi=$e(),vi=Ze();Nr.exports=Ue;function Ue(){if(!U(this,Ue))return new Ue;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var W=Ue.prototype;W.createTextNode=function(e){return new li(e,this)};W.createElementNS=function(e,t){var i=e===null?null:String(e);return new Re(t,this,i)};W.createElement=function(e){return new Re(e,this)};W.createDocumentFragment=function(){return new ci(this)};W.createEvent=function(e){return new _i(e)};W.createComment=function(e){return new di(e,this)};W.getElementById=function(e){e=String(e);var t=ui(this.childNodes,function(i){if(String(i.id)===e)return i});return t||null};W.getElementsByClassName=Re.prototype.getElementsByClassName;W.getElementsByTagName=Re.prototype.getElementsByTagName;W.contains=Re.prototype.contains;W.removeEventListener=vi;W.addEventListener=pi;W.dispatchEvent=fi});var Mr=B(function(Vu,Cr){var mi=Lr();Cr.exports=new mi});var Ur=B(function(Wu,Br){var Hr=typeof global!="undefined"?global:typeof window!="undefined"?window:{},hi=Mr(),qe;typeof document!="undefined"?qe=document:(qe=Hr["__GLOBAL_DOCUMENT_CACHE@4"],qe||(qe=Hr["__GLOBAL_DOCUMENT_CACHE@4"]=hi));Br.exports=qe});function pt(r){if(Array.isArray(r))return r}function vt(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var i=[],a=!0,n=!1,o,s;try{for(t=t.call(r);!(a=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));a=!0);}catch(u){n=!0,s=u}finally{try{!a&&t.return!=null&&t.return()}finally{if(n)throw s}}return i}}function mt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ke(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=r[t];return i}function Ae(r,e){if(r){if(typeof r=="string")return ke(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ke(r,e)}}function H(r,e){return pt(r)||vt(r,e)||Ae(r,e)||mt()}var be=G(J());var Ge=G(J());var yt=G(J()),ta={now:function(){var r=yt.default.performance,e=r&&r.timing,t=e&&e.navigationStart,i=typeof t=="number"&&typeof r.now=="function"?t+r.now():Date.now();return Math.round(i)}},A=ta;var ee=function(){var e,t,i;if(typeof((e=Ge.default.crypto)===null||e===void 0?void 0:e.getRandomValues)=="function"){i=new Uint8Array(32),Ge.default.crypto.getRandomValues(i);for(var a=0;a<32;a++)i[a]=i[a]%16}else{i=[];for(var n=0;n<32;n++)i[n]=Math.random()*16|0}var o=0;t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var b=p==="x"?i[o]:i[o]&3|8;return o++,b.toString(16)});var s=A.now(),u=s==null?void 0:s.toString(16).substring(3);return u?t.substring(0,28)+u:t},Oe=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)};var Q=function(e){if(e&&typeof e.nodeName!="undefined")return e.muxId||(e.muxId=Oe()),e.muxId;var t;try{t=document.querySelector(e)}catch(i){}return t&&!t.muxId&&(t.muxId=e),(t==null?void 0:t.muxId)||e},se=function(e){var t;e&&typeof e.nodeName!="undefined"?(t=e,e=Q(t)):t=document.querySelector(e);var i=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,i]};function gt(r){if(Array.isArray(r))return ke(r)}function bt(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Tt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function V(r){return gt(r)||bt(r)||Ae(r)||Tt()}var Y={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},wt=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,t,i,a,n,o,s=r?[console,r]:[console],u=(t=console.trace).bind.apply(t,V(s)),p=(i=console.info).bind.apply(i,V(s)),b=(a=console.debug).bind.apply(a,V(s)),k=(n=console.warn).bind.apply(n,V(s)),y=(o=console.error).bind.apply(o,V(s)),c=e;return{trace:function(){for(var T=arguments.length,x=new Array(T),m=0;m<T;m++)x[m]=arguments[m];if(!(c>Y.TRACE))return u.apply(void 0,V(x))},debug:function(){for(var T=arguments.length,x=new Array(T),m=0;m<T;m++)x[m]=arguments[m];if(!(c>Y.DEBUG))return b.apply(void 0,V(x))},info:function(){for(var T=arguments.length,x=new Array(T),m=0;m<T;m++)x[m]=arguments[m];if(!(c>Y.INFO))return p.apply(void 0,V(x))},warn:function(){for(var T=arguments.length,x=new Array(T),m=0;m<T;m++)x[m]=arguments[m];if(!(c>Y.WARN))return k.apply(void 0,V(x))},error:function(){for(var T=arguments.length,x=new Array(T),m=0;m<T;m++)x[m]=arguments[m];if(!(c>Y.ERROR))return y.apply(void 0,V(x))},get level(){return c},set level(v){v!==this.level&&(c=v!=null?v:e)}}};var q=wt("[mux]");var Ie=G(J());function ce(){var r=Ie.default.doNotTrack||Ie.default.navigator&&Ie.default.navigator.doNotTrack;return r==="1"}function g(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}te();function D(r,e){if(!U(r,e))throw new TypeError("Cannot call a class as a function")}function Et(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function L(r,e,t){return e&&Et(r.prototype,e),t&&Et(r,t),r}function l(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function X(r){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},X(r)}function kt(r,e){for(;!Object.prototype.hasOwnProperty.call(r,e)&&(r=X(r),r!==null););return r}function De(r,e,t){return typeof Reflect!="undefined"&&Reflect.get?De=Reflect.get:De=function(a,n,o){var s=kt(a,n);if(s){var u=Object.getOwnPropertyDescriptor(s,n);return u.get?u.get.call(o||a):u.value}},De(r,e,t||r)}function Pe(r,e){return Pe=Object.setPrototypeOf||function(i,a){return i.__proto__=a,i},Pe(r,e)}function xt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&Pe(r,e)}function Dt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}Je();function St(r,e){return e&&(Ne(e)==="object"||typeof e=="function")?e:g(r)}function Rt(r){var e=Dt();return function(){var i=X(r),a;if(e){var n=X(this).constructor;a=Reflect.construct(i,arguments,n)}else a=i.apply(this,arguments);return St(this,a)}}var F=function(r){return re(r)[0]};var re=function(r){if(typeof r!="string"||r==="")return["localhost"];var e=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,t=r.match(e)||[],i=t[4],a;return i&&(a=(i.match(/[^\.]+\.[^\.]+$/)||[])[0]),[i,a]};var Le=G(J()),ra={exists:function(){var r=Le.default.performance,e=r&&r.timing;return e!==void 0},domContentLoadedEventEnd:function(){var r=Le.default.performance,e=r&&r.timing;return e&&e.domContentLoadedEventEnd},navigationStart:function(){var r=Le.default.performance,e=r&&r.timing;return e&&e.navigationStart}},_e=ra;function O(r,e,t){t=t===void 0?1:t,r[e]=r[e]||0,r[e]+=t}function ue(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){l(r,a,t[a])})}return r}function aa(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,i)}return t}function fe(r,e){return e=e!=null?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):aa(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}),r}var ia=["x-cdn","content-type"],qt=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],na=ia.concat(qt);function pe(r){r=r||"";var e={},t=r.trim().split(/[\r\n]+/);return t.forEach(function(i){if(i){var a=i.split(": "),n=a.shift();n&&(na.indexOf(n.toLowerCase())>=0||n.toLowerCase().indexOf("x-litix-")===0)&&(e[n]=a.join(": "))}}),e}function de(r){if(r){var e=qt.find(function(t){return r[t]!==void 0});return e?r[e]:void 0}}var oa=function(r){var e={};for(var t in r){var i=r[t],a=i["DATA-ID"].search("io.litix.data.");if(a!==-1){var n=i["DATA-ID"].replace("io.litix.data.","");e[n]=i.VALUE}}return e},Ce=oa;var Me=function(r){if(!r)return{};var e=_e.navigationStart(),t=r.loading,i=t?t.start:r.trequest,a=t?t.first:r.tfirst,n=t?t.end:r.tload;return{bytesLoaded:r.total,requestStart:Math.round(e+i),responseStart:Math.round(e+a),responseEnd:Math.round(e+n)}},Se=function(r){if(!(!r||typeof r.getAllResponseHeaders!="function"))return pe(r.getAllResponseHeaders())},At=function(r,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,n=r.log,o=r.utils.secondsToMs,s=function(m){var f=parseInt(a.version),_;return f===1&&m.programDateTime!==null&&(_=m.programDateTime),f===0&&m.pdt!==null&&(_=m.pdt),_};if(!_e.exists()){n.warn("performance timing not supported. Not tracking HLS.js.");return}var u=function(m,f){return r.emit(e,m,f)},p=function(m,f){var _=f.levels,d=f.audioTracks,h=f.url,w=f.stats,E=f.networkDetails,S=f.sessionData,N={},M={};_.forEach(function(j,oe){N[oe]={width:j.width,height:j.height,bitrate:j.bitrate,attrs:j.attrs}}),d.forEach(function(j,oe){M[oe]={name:j.name,language:j.lang,bitrate:j.bitrate}});var I=Me(w),R=I.bytesLoaded,Z=I.requestStart,Te=I.responseStart,we=I.responseEnd;u("requestcompleted",fe(ue({},Ce(S)),{request_event_type:m,request_bytes_loaded:R,request_start:Z,request_response_start:Te,request_response_end:we,request_type:"manifest",request_hostname:F(h),request_response_headers:Se(E),request_rendition_lists:{media:N,audio:M,video:{}}}))};t.on(a.Events.MANIFEST_LOADED,p);var b=function(m,f){var _=f.details,d=f.level,h=f.networkDetails,w=f.stats,E=Me(w),S=E.bytesLoaded,N=E.requestStart,M=E.responseStart,I=E.responseEnd,R=_.fragments[_.fragments.length-1],Z=s(R)+o(R.duration);u("requestcompleted",{request_event_type:m,request_bytes_loaded:S,request_start:N,request_response_start:M,request_response_end:I,request_current_level:d,request_type:"manifest",request_hostname:F(_.url),request_response_headers:Se(h),video_holdback:_.holdBack&&o(_.holdBack),video_part_holdback:_.partHoldBack&&o(_.partHoldBack),video_part_target_duration:_.partTarget&&o(_.partTarget),video_target_duration:_.targetduration&&o(_.targetduration),video_source_is_live:_.live,player_manifest_newest_program_time:isNaN(Z)?void 0:Z})};t.on(a.Events.LEVEL_LOADED,b);var k=function(m,f){var _=f.details,d=f.networkDetails,h=f.stats,w=Me(h),E=w.bytesLoaded,S=w.requestStart,N=w.responseStart,M=w.responseEnd;u("requestcompleted",{request_event_type:m,request_bytes_loaded:E,request_start:S,request_response_start:N,request_response_end:M,request_type:"manifest",request_hostname:F(_.url),request_response_headers:Se(d)})};t.on(a.Events.AUDIO_TRACK_LOADED,k);var y=function(m,f){var _=f.stats,d=f.networkDetails,h=f.frag;_=_||h.stats;var w=Me(_),E=w.bytesLoaded,S=w.requestStart,N=w.responseStart,M=w.responseEnd,I=d?Se(d):void 0,R={request_event_type:m,request_bytes_loaded:E,request_start:S,request_response_start:N,request_response_end:M,request_hostname:d?F(d.responseURL):void 0,request_id:I?de(I):void 0,request_response_headers:I,request_media_duration:h.duration,request_url:d==null?void 0:d.responseURL};h.type==="main"?(R.request_type="media",R.request_current_level=h.level,R.request_video_width=(t.levels[h.level]||{}).width,R.request_video_height=(t.levels[h.level]||{}).height,R.request_labeled_bitrate=(t.levels[h.level]||{}).bitrate):R.request_type=h.type,u("requestcompleted",R)};t.on(a.Events.FRAG_LOADED,y);var c=function(m,f){var _=f.frag,d=_.start,h=s(_),w={currentFragmentPDT:h,currentFragmentStart:o(d)};u("fragmentchange",w)};t.on(a.Events.FRAG_CHANGED,c);var v=function(m,f){var _=f.type,d=f.details,h=f.response,w=f.fatal,E=f.frag,S=f.networkDetails,N=(E==null?void 0:E.url)||f.url||"",M=S?Se(S):void 0;if((d===a.ErrorDetails.MANIFEST_LOAD_ERROR||d===a.ErrorDetails.MANIFEST_LOAD_TIMEOUT||d===a.ErrorDetails.FRAG_LOAD_ERROR||d===a.ErrorDetails.FRAG_LOAD_TIMEOUT||d===a.ErrorDetails.LEVEL_LOAD_ERROR||d===a.ErrorDetails.LEVEL_LOAD_TIMEOUT||d===a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||d===a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||d===a.ErrorDetails.SUBTITLE_LOAD_ERROR||d===a.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||d===a.ErrorDetails.KEY_LOAD_ERROR||d===a.ErrorDetails.KEY_LOAD_TIMEOUT)&&u("requestfailed",{request_error:d,request_url:N,request_hostname:F(N),request_id:M?de(M):void 0,request_type:d===a.ErrorDetails.FRAG_LOAD_ERROR||d===a.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":d===a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||d===a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":d===a.ErrorDetails.SUBTITLE_LOAD_ERROR||d===a.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":d===a.ErrorDetails.KEY_LOAD_ERROR||d===a.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:h==null?void 0:h.code,request_error_text:h==null?void 0:h.text}),w){var I,R="".concat(N?"url: ".concat(N,"\n"):"")+"".concat(h&&(h.code||h.text)?"response: ".concat(h.code,", ").concat(h.text,"\n"):"")+"".concat(f.reason?"failure reason: ".concat(f.reason,"\n"):"")+"".concat(f.level?"level: ".concat(f.level,"\n"):"")+"".concat(f.parent?"parent stream controller: ".concat(f.parent,"\n"):"")+"".concat(f.buffer?"buffer length: ".concat(f.buffer,"\n"):"")+"".concat(f.error?"error: ".concat(f.error,"\n"):"")+"".concat(f.event?"event: ".concat(f.event,"\n"):"")+"".concat(f.err?"error message: ".concat((I=f.err)===null||I===void 0?void 0:I.message,"\n"):"");u("error",{player_error_code:_,player_error_message:d,player_error_context:R})}};t.on(a.Events.ERROR,v);var T=function(m,f){var _=f.frag,d=_&&_._url||"";u("requestcanceled",{request_event_type:m,request_url:d,request_type:"media",request_hostname:F(d)})};t.on(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,T);var x=function(m,f){var _=f.level,d=t.levels[_];if(d&&d.attrs&&d.attrs.BANDWIDTH){var h=d.attrs.BANDWIDTH,w,E=parseFloat(d.attrs["FRAME-RATE"]);isNaN(E)||(w=E),h?u("renditionchange",{video_source_fps:w,video_source_bitrate:h,video_source_width:d.width,video_source_height:d.height,video_source_rendition_name:d.name,video_source_codec:d==null?void 0:d.videoCodec}):n.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};t.on(a.Events.LEVEL_SWITCHED,x),t._stopMuxMonitor=function(){t.off(a.Events.MANIFEST_LOADED,p),t.off(a.Events.LEVEL_LOADED,b),t.off(a.Events.AUDIO_TRACK_LOADED,k),t.off(a.Events.FRAG_LOADED,y),t.off(a.Events.FRAG_CHANGED,c),t.off(a.Events.ERROR,v),t.off(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,T),t.off(a.Events.LEVEL_SWITCHED,x),t.off(a.Events.DESTROYING,t._stopMuxMonitor),delete t._stopMuxMonitor},t.on(a.Events.DESTROYING,t._stopMuxMonitor)},Ot=function(r){r&&typeof r._stopMuxMonitor=="function"&&r._stopMuxMonitor()};var It=function(r,e){if(!r||!r.requestEndDate)return{};var t=F(r.url),i=r.url,a=r.bytesLoaded,n=new Date(r.requestStartDate).getTime(),o=new Date(r.firstByteDate).getTime(),s=new Date(r.requestEndDate).getTime(),u=isNaN(r.duration)?0:r.duration,p=typeof e.getMetricsFor=="function"?e.getMetricsFor(r.mediaType).HttpList:e.getDashMetrics().getHttpRequests(r.mediaType),b;p.length>0&&(b=pe(p[p.length-1]._responseHeaders||""));var k=b?de(b):void 0;return{requestStart:n,requestResponseStart:o,requestResponseEnd:s,requestBytesLoaded:a,requestResponseHeaders:b,requestMediaDuration:u,requestHostname:t,requestUrl:i,requestId:k}},sa=function(r,e){var t=e.getQualityFor(r),i=e.getCurrentTrackFor(r).bitrateList;return i?{currentLevel:t,renditionWidth:i[t].width||null,renditionHeight:i[t].height||null,renditionBitrate:i[t].bandwidth}:{}},ua=function(r){var e;return(e=r.match(/.*codecs\*?="(.*)"/))===null||e===void 0?void 0:e[1]},da=function(e){try{var t,i,a=(i=e.getVersion)===null||i===void 0||(t=i.call(e))===null||t===void 0?void 0:t.split(".").map(function(n){return parseInt(n)})[0];return a}catch(n){return!1}},Pt=function(r,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=r.log;if(!t||!t.on){a.warn("Invalid dash.js player reference. Monitoring blocked.");return}var n=da(t),o=function(_,d){return r.emit(e,_,d)},s=function(_){var d=_.type,h=_.data,w=(h||{}).url;o("requestcompleted",{request_event_type:d,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:F(w),request_url:w})};t.on("manifestLoaded",s);var u={},p=function(_){if(typeof _.getRequests!="function")return null;var d=_.getRequests({state:"executed"});return d.length===0?null:d[d.length-1]},b=function(_){var d=_.type,h=_.fragmentModel,w=_.chunk,E=p(h);k({type:d,request:E,chunk:w})},k=function(_){var d=_.type,h=_.chunk,w=_.request,E=(h||{}).mediaInfo,S=E||{},N=S.type,M=S.bitrateList;M=M||[];var I={};M.forEach(function(Ee,z){I[z]={},I[z].width=Ee.width,I[z].height=Ee.height,I[z].bitrate=Ee.bandwidth,I[z].attrs={}}),N==="video"?u.video=I:N==="audio"?u.audio=I:u.media=I;var R=It(w,t),Z=R.requestStart,Te=R.requestResponseStart,we=R.requestResponseEnd,j=R.requestResponseHeaders,oe=R.requestMediaDuration,Ve=R.requestHostname,We=R.requestUrl,je=R.requestId;o("requestcompleted",{request_event_type:d,request_start:Z,request_response_start:Te,request_response_end:we,request_bytes_loaded:-1,request_type:N+"_init",request_response_headers:j,request_hostname:Ve,request_id:je,request_url:We,request_media_duration:oe,request_rendition_lists:u})};n>=4?t.on("initFragmentLoaded",k):t.on("initFragmentLoaded",b);var y=function(_){var d=_.type,h=_.fragmentModel,w=_.chunk,E=p(h);c({type:d,request:E,chunk:w})},c=function(_){var d=_.type,h=_.chunk,w=_.request,E=h||{},S=E.mediaInfo,N=E.start,M=S||{},I=M.type,R=It(w,t),Z=R.requestStart,Te=R.requestResponseStart,we=R.requestResponseEnd,j=R.requestBytesLoaded,oe=R.requestResponseHeaders,Ve=R.requestMediaDuration,We=R.requestHostname,je=R.requestUrl,Ee=R.requestId,z=sa(I,t),Gr=z.currentLevel,Jr=z.renditionWidth,Qr=z.renditionHeight,zr=z.renditionBitrate;o("requestcompleted",{request_event_type:d,request_start:Z,request_response_start:Te,request_response_end:we,request_bytes_loaded:j,request_type:I,request_response_headers:oe,request_hostname:We,request_id:Ee,request_url:je,request_media_start_time:N,request_media_duration:Ve,request_current_level:Gr,request_labeled_bitrate:zr,request_video_width:Jr,request_video_height:Qr})};n>=4?t.on("mediaFragmentLoaded",c):t.on("mediaFragmentLoaded",y);var v={video:void 0,audio:void 0,totalBitrate:void 0},T=function(){if(v.video&&typeof v.video.bitrate=="number"){if(!(v.video.width&&v.video.height)){a.warn("have bitrate info for video but missing width/height");return}var _=v.video.bitrate;if(v.audio&&typeof v.audio.bitrate=="number"&&(_+=v.audio.bitrate),_!==v.totalBitrate)return v.totalBitrate=_,{video_source_bitrate:_,video_source_height:v.video.height,video_source_width:v.video.width,video_source_codec:ua(v.video.codec)}}},x=function(_,d,h){if(typeof _.newQuality!="number"){a.warn("missing evt.newQuality in qualityChangeRendered event",_);return}var w=_.mediaType;if(w==="audio"||w==="video"){var E=t.getBitrateInfoListFor(w).find(function(N){var M=N.qualityIndex;return M===_.newQuality});if(!(E&&typeof E.bitrate=="number")){a.warn("missing bitrate info for ".concat(w));return}v[w]=fe(ue({},E),{codec:t.getCurrentTrackFor(w).codec});var S=T();S&&o("renditionchange",S)}};t.on("qualityChangeRendered",x);var m=function(_){var d=_.request,h=_.mediaType;d=d||{},o("requestcanceled",{request_event_type:d.type+"_"+d.action,request_url:d.url,request_type:h,request_hostname:F(d.url)})};t.on("fragmentLoadingAbandoned",m);var f=function(_){var d=_.error,h,w,E=(d==null||(h=d.data)===null||h===void 0?void 0:h.request)||{},S=(d==null||(w=d.data)===null||w===void 0?void 0:w.response)||{};(d==null?void 0:d.code)===27&&o("requestfailed",{request_error:E.type+"_"+E.action,request_url:E.url,request_hostname:F(E.url),request_type:E.mediaType,request_error_code:S.status,request_error_text:S.statusText});var N="".concat(E!=null&&E.url?"url: ".concat(E.url,"\n"):"")+"".concat(S!=null&&S.status||S!=null&&S.statusText?"response: ".concat(S==null?void 0:S.status,", ").concat(S==null?void 0:S.statusText,"\n"):"");o("error",{player_error_code:d==null?void 0:d.code,player_error_message:d==null?void 0:d.message,player_error_context:N})};t.on("error",f),t._stopMuxMonitor=function(){t.off("manifestLoaded",s),t.off("initFragmentLoaded",k),t.off("mediaFragmentLoaded",c),t.off("qualityChangeRendered",x),t.off("error",f),t.off("fragmentLoadingAbandoned",m),delete t._stopMuxMonitor}},Nt=function(r){r&&typeof r._stopMuxMonitor=="function"&&r._stopMuxMonitor()};var Lt=0,la=function(){"use strict";function r(){D(this,r),l(this,"_listeners",void 0)}return L(r,[{key:"on",value:function(t,i,a){return i._eventEmitterGuid=i._eventEmitterGuid||++Lt,this._listeners=this._listeners||{},this._listeners[t]=this._listeners[t]||[],a&&(i=i.bind(a)),this._listeners[t].push(i),i}},{key:"off",value:function(t,i){var a=this._listeners&&this._listeners[t];a&&a.forEach(function(n,o){n._eventEmitterGuid===i._eventEmitterGuid&&a.splice(o,1)})}},{key:"one",value:function(t,i,a){var n=this;i._eventEmitterGuid=i._eventEmitterGuid||++Lt;var o=function(){n.off(t,o),i.apply(a||this,arguments)};o._eventEmitterGuid=i._eventEmitterGuid,this.on(t,o)}},{key:"emit",value:function(t,i){var a=this;if(this._listeners){i=i||{};var n=this._listeners["before*"]||[],o=this._listeners[t]||[],s=this._listeners["after"+t]||[],u=function(p,b){p=p.slice(),p.forEach(function(k){k.call(a,{type:t},b)})};u(n,i),u(o,i),u(s,i)}}}]),r}(),Ct=la;var He=G(J()),ca=function(){"use strict";function r(e){var t=this;D(this,r),l(this,"_playbackHeartbeatInterval",void 0),l(this,"_playheadShouldBeProgressing",void 0),l(this,"pm",void 0),this.pm=e,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,e.on("playing",function(){t._playheadShouldBeProgressing=!0}),e.on("play",this._startPlaybackHeartbeatInterval.bind(this)),e.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),e.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),e.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("seeked",function(){e.data.player_is_paused?t._stopPlaybackHeartbeatInterval():t._startPlaybackHeartbeatInterval()}),e.on("timeupdate",function(){t._playbackHeartbeatInterval!==null&&e.emit("playbackheartbeat")}),e.on("devicesleep",function(i,a){t._playbackHeartbeatInterval!==null&&(He.default.clearInterval(t._playbackHeartbeatInterval),e.emit("playbackheartbeatend",{viewer_time:a.viewer_time}),t._playbackHeartbeatInterval=null)})}return L(r,[{key:"_startPlaybackHeartbeatInterval",value:function(){var t=this;this._playbackHeartbeatInterval===null&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=He.default.setInterval(function(){t.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,this._playbackHeartbeatInterval!==null&&(He.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),r}(),Mt=ca;var _a=function r(e){"use strict";var t=this;D(this,r),l(this,"viewErrored",void 0),e.on("viewinit",function(){t.viewErrored=!1}),e.on("error",function(i,a){try{var n=e.errorTranslator({player_error_code:a.player_error_code,player_error_message:a.player_error_message,player_error_context:a.player_error_context,player_error_severity:a.player_error_severity,player_error_business_exception:a.player_error_business_exception});n&&(e.data.player_error_code=n.player_error_code||a.player_error_code,e.data.player_error_message=n.player_error_message||a.player_error_message,e.data.player_error_context=n.player_error_context||a.player_error_context,e.data.player_error_severity=n.player_error_severity||a.player_error_severity,e.data.player_error_business_exception=n.player_error_business_exception||a.player_error_business_exception,t.viewErrored=!0)}catch(o){e.mux.log.warn("Exception in error translator callback.",o),t.viewErrored=!0}}),e.on("aftererror",function(){var i,a,n,o,s;(i=e.data)===null||i===void 0||delete i.player_error_code,(a=e.data)===null||a===void 0||delete a.player_error_message,(n=e.data)===null||n===void 0||delete n.player_error_context,(o=e.data)===null||o===void 0||delete o.player_error_severity,(s=e.data)===null||s===void 0||delete s.player_error_business_exception})},Ht=_a;var fa=function(){"use strict";function r(e){D(this,r),l(this,"_watchTimeTrackerLastCheckedTime",void 0),l(this,"pm",void 0),this.pm=e,this._watchTimeTrackerLastCheckedTime=null,e.on("playbackheartbeat",this._updateWatchTime.bind(this)),e.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return L(r,[{key:"_updateWatchTime",value:function(t,i){var a=i.viewer_time;this._watchTimeTrackerLastCheckedTime===null&&(this._watchTimeTrackerLastCheckedTime=a),O(this.pm.data,"view_watch_time",a-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=a}},{key:"_clearWatchTimeState",value:function(t,i){this._updateWatchTime(t,i),this._watchTimeTrackerLastCheckedTime=null}}]),r}(),Bt=fa;var pa=function(){"use strict";function r(e){var t=this;D(this,r),l(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),l(this,"_lastTime",void 0),l(this,"_isAdPlaying",void 0),l(this,"_callbackUpdatePlaybackTime",void 0),l(this,"pm",void 0),this.pm=e,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=A.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var i=this._startPlaybackTimeTracking.bind(this);e.on("playing",i),e.on("adplaying",i),e.on("seeked",i);var a=this._stopPlaybackTimeTracking.bind(this);e.on("playbackheartbeatend",a),e.on("seeking",a),e.on("adplaying",function(){t._isAdPlaying=!0}),e.on("adended",function(){t._isAdPlaying=!1}),e.on("adpause",function(){t._isAdPlaying=!1}),e.on("adbreakstart",function(){t._isAdPlaying=!1}),e.on("adbreakend",function(){t._isAdPlaying=!1}),e.on("adplay",function(){t._isAdPlaying=!1}),e.on("viewinit",function(){t._playbackTimeTrackerLastPlayheadPosition=-1,t._lastTime=A.now(),t._isAdPlaying=!1,t._callbackUpdatePlaybackTime=null})}return L(r,[{key:"_startPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime===null&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var t=this.pm.data.player_playhead_time,i=A.now(),a=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&t>this._playbackTimeTrackerLastPlayheadPosition?a=t-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(a=i-this._lastTime),a>0&&a<=1e3&&O(this.pm.data,"view_content_playback_time",a),this._playbackTimeTrackerLastPlayheadPosition=t,this._lastTime=i}}]),r}(),Ut=pa;var va=function(){"use strict";function r(e){D(this,r),l(this,"pm",void 0),this.pm=e;var t=this._updatePlayheadTime.bind(this);e.on("playbackheartbeat",t),e.on("playbackheartbeatend",t),e.on("timeupdate",t),e.on("destroy",function(){e.off("timeupdate",t)})}return L(r,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=typeof this.pm.data.view_max_playhead_position=="undefined"?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(t,i){var a=this,n=function(){a.pm.currentFragmentPDT&&a.pm.currentFragmentStart&&(a.pm.data.player_program_time=a.pm.currentFragmentPDT+a.pm.data.player_playhead_time-a.pm.currentFragmentStart)};if(i&&i.player_playhead_time)this.pm.data.player_playhead_time=i.player_playhead_time,n(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var o=this.pm.getPlayheadTime();typeof o!="undefined"&&(this.pm.data.player_playhead_time=o,n(),this._updateMaxPlayheadPosition())}}}]),r}(),Ft=va;var Vt=5*60*1e3,ma=function r(e){"use strict";if(D(this,r),!e.disableRebufferTracking){var t,i=function(n,o){a(o),t=void 0},a=function(n){if(t){var o=n.viewer_time-t;O(e.data,"view_rebuffer_duration",o),t=n.viewer_time,e.data.view_rebuffer_duration>Vt&&(e.emit("viewend"),e.send("viewend"),e.mux.log.warn("Ending view after rebuffering for longer than ".concat(Vt,"ms, future events will be ignored unless a programchange or videochange occurs.")))}e.data.view_watch_time>=0&&e.data.view_rebuffer_count>0&&(e.data.view_rebuffer_frequency=e.data.view_rebuffer_count/e.data.view_watch_time,e.data.view_rebuffer_percentage=e.data.view_rebuffer_duration/e.data.view_watch_time)};e.on("playbackheartbeat",function(n,o){return a(o)}),e.on("rebufferstart",function(n,o){t||(O(e.data,"view_rebuffer_count",1),t=o.viewer_time,e.one("rebufferend",i))}),e.on("viewinit",function(){t=void 0,e.off("rebufferend",i)})}},Wt=ma;var ha=function(){"use strict";function r(e){var t=this;D(this,r),l(this,"_lastCheckedTime",void 0),l(this,"_lastPlayheadTime",void 0),l(this,"_lastPlayheadTimeUpdatedTime",void 0),l(this,"_rebuffering",void 0),l(this,"pm",void 0),this.pm=e,!(e.disableRebufferTracking||e.disablePlayheadRebufferTracking)&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,e.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),e.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),e.on("seeking",function(){t._cleanupRebufferTracker(null,{viewer_time:A.now()})}))}return L(r,[{key:"_checkIfRebuffering",value:function(t,i){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing){this._cleanupRebufferTracker(t,i);return}if(this._lastCheckedTime===null){this._prepareRebufferTrackerState(i.viewer_time);return}if(this._lastPlayheadTime!==this.pm.data.player_playhead_time){this._cleanupRebufferTracker(t,i,!0);return}var a=i.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.sustainedRebufferThreshold=="number"&&a>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=i.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(t){this._lastCheckedTime=t,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=t}},{key:"_cleanupRebufferTracker",value:function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:i.viewer_time});else{if(this._lastCheckedTime===null)return;var n=this.pm.data.player_playhead_time-this._lastPlayheadTime,o=i.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.minimumRebufferDuration=="number"&&n>0&&o-n>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+o-n}))}a?this._prepareRebufferTrackerState(i.viewer_time):this._clearRebufferTrackerState()}}]),r}(),jt=ha;var ya=function(){"use strict";function r(e){var t=this;D(this,r),l(this,"NAVIGATION_START",void 0),l(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){var i=e.data,a=i.view_id;if(!i.view_program_changed){var n=function(o,s){var u=s.viewer_time;o.type==="playing"&&typeof e.data.view_time_to_first_frame=="undefined"?t.calculateTimeToFirstFrame(u||A.now(),a):o.type==="adplaying"&&(typeof e.data.view_time_to_first_frame=="undefined"||t._inPrerollPosition())&&t.calculateTimeToFirstFrame(u||A.now(),a)};e.one("playing",n),e.one("adplaying",n),e.one("viewend",function(){e.off("playing",n),e.off("adplaying",n)})}})}return L(r,[{key:"_inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time=="undefined"||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(t,i){i===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:t}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),r}(),Gt=ya;var ga=function r(e){"use strict";var t=this;D(this,r),l(this,"_lastPlayerHeight",void 0),l(this,"_lastPlayerWidth",void 0),l(this,"_lastPlayheadPosition",void 0),l(this,"_lastSourceHeight",void 0),l(this,"_lastSourceWidth",void 0),e.on("viewinit",function(){t._lastPlayheadPosition=-1});var i=["pause","rebufferstart","seeking","error","adbreakstart","hb"],a=["playing","hb"];i.forEach(function(n){e.on(n,function(){if(t._lastPlayheadPosition>=0&&e.data.player_playhead_time>=0&&t._lastPlayerWidth>=0&&t._lastSourceWidth>0&&t._lastPlayerHeight>=0&&t._lastSourceHeight>0){var o=e.data.player_playhead_time-t._lastPlayheadPosition;if(o<0){t._lastPlayheadPosition=-1;return}var s=Math.min(t._lastPlayerWidth/t._lastSourceWidth,t._lastPlayerHeight/t._lastSourceHeight),u=Math.max(0,s-1),p=Math.max(0,1-s);e.data.view_max_upscale_percentage=Math.max(e.data.view_max_upscale_percentage||0,u),e.data.view_max_downscale_percentage=Math.max(e.data.view_max_downscale_percentage||0,p),O(e.data,"view_total_content_playback_time",o),O(e.data,"view_total_upscaling",u*o),O(e.data,"view_total_downscaling",p*o)}t._lastPlayheadPosition=-1})}),a.forEach(function(n){e.on(n,function(){t._lastPlayheadPosition=e.data.player_playhead_time,t._lastPlayerWidth=e.data.player_width,t._lastPlayerHeight=e.data.player_height,t._lastSourceWidth=e.data.video_source_width,t._lastSourceHeight=e.data.video_source_height})})},Jt=ga;var ba=2e3,Ta=function r(e){"use strict";var t=this;D(this,r),l(this,"isSeeking",void 0),this.isSeeking=!1;var i=-1,a=function(){var n=A.now(),o=(e.data.viewer_time||n)-(i||n);O(e.data,"view_seek_duration",o),e.data.view_max_seek_time=Math.max(e.data.view_max_seek_time||0,o),t.isSeeking=!1,i=-1};e.on("seeking",function(n,o){if(Object.assign(e.data,o),t.isSeeking&&o.viewer_time-i<=ba){i=o.viewer_time;return}t.isSeeking&&a(),t.isSeeking=!0,i=o.viewer_time,O(e.data,"view_seek_count",1),e.send("seeking")}),e.on("seeked",function(){a()}),e.on("viewend",function(){t.isSeeking&&(a(),e.send("seeked")),t.isSeeking=!1,i=-1})},Qt=Ta;var zt=function(e,t){e.push(t),e.sort(function(i,a){return i.viewer_time-a.viewer_time})},wa=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],Ea=function(){"use strict";function r(e){var t=this;D(this,r),l(this,"_adHasPlayed",void 0),l(this,"_adRequests",void 0),l(this,"_adResponses",void 0),l(this,"_currentAdRequestNumber",void 0),l(this,"_currentAdResponseNumber",void 0),l(this,"_prerollPlayTime",void 0),l(this,"_wouldBeNewAdPlay",void 0),l(this,"isAdBreak",void 0),l(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){t.isAdBreak=!1,t._currentAdRequestNumber=0,t._currentAdResponseNumber=0,t._adRequests=[],t._adResponses=[],t._adHasPlayed=!1,t._wouldBeNewAdPlay=!0,t._prerollPlayTime=void 0}),wa.forEach(function(a){return e.on(a,t._updateAdData.bind(t))});var i=function(){t.isAdBreak=!1};e.on("adbreakstart",function(){t.isAdBreak=!0}),e.on("play",i),e.on("playing",i),e.on("viewend",i),e.on("adrequest",function(a,n){n=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdRequestNumber++},n),zt(t._adRequests,n),O(e.data,"view_ad_request_count"),t.inPrerollPosition()&&(e.data.view_preroll_requested=!0,t._adHasPlayed||O(e.data,"view_preroll_request_count"))}),e.on("adresponse",function(a,n){n=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdResponseNumber++},n),zt(t._adResponses,n);var o=t.findAdRequest(n.ad_request_id);o&&O(e.data,"view_ad_request_time",Math.max(0,n.viewer_time-o.viewer_time))}),e.on("adplay",function(a,n){t._adHasPlayed=!0,t._wouldBeNewAdPlay&&(t._wouldBeNewAdPlay=!1,O(e.data,"view_ad_played_count")),t.inPrerollPosition()&&!e.data.view_preroll_played&&(e.data.view_preroll_played=!0,t._adRequests.length>0&&(e.data.view_preroll_request_time=Math.max(0,n.viewer_time-t._adRequests[0].viewer_time)),e.data.view_start&&(e.data.view_startup_preroll_request_time=Math.max(0,n.viewer_time-e.data.view_start)),t._prerollPlayTime=n.viewer_time)}),e.on("adplaying",function(a,n){t.inPrerollPosition()&&typeof e.data.view_preroll_load_time=="undefined"&&typeof t._prerollPlayTime!="undefined"&&(e.data.view_preroll_load_time=n.viewer_time-t._prerollPlayTime,e.data.view_startup_preroll_load_time=n.viewer_time-t._prerollPlayTime)}),e.on("adclicked",function(a,n){t._wouldBeNewAdPlay||O(e.data,"view_ad_clicked_count")}),e.on("adskipped",function(a,n){t._wouldBeNewAdPlay||O(e.data,"view_ad_skipped_count")}),e.on("adended",function(){t._wouldBeNewAdPlay=!0}),e.on("aderror",function(){t._wouldBeNewAdPlay=!0})}return L(r,[{key:"inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time=="undefined"||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(t){for(var i=0;i<this._adRequests.length;i++)if(this._adRequests[i].ad_request_id===t)return this._adRequests[i]}},{key:"_updateAdData",value:function(t,i){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&i.ad_tag_url){var a=H(re(i.ad_tag_url),2),n=a[0],o=a[1];this.pm.data.view_preroll_ad_tag_domain=o,this.pm.data.view_preroll_ad_tag_hostname=n}if(!this.pm.data.view_preroll_ad_asset_hostname&&i.ad_asset_url){var s=H(re(i.ad_asset_url),2),u=s[0],p=s[1];this.pm.data.view_preroll_ad_asset_domain=p,this.pm.data.view_preroll_ad_asset_hostname=u}}this.pm.data.ad_asset_url=i==null?void 0:i.ad_asset_url,this.pm.data.ad_tag_url=i==null?void 0:i.ad_tag_url,this.pm.data.ad_creative_id=i==null?void 0:i.ad_creative_id,this.pm.data.ad_id=i==null?void 0:i.ad_id,this.pm.data.ad_universal_id=i==null?void 0:i.ad_universal_id}}]),r}(),Kt=Ea;var Qe=G(J());var ka=function r(e){"use strict";D(this,r);var t,i,a=function(){e.disableRebufferTracking||(O(e.data,"view_waiting_rebuffer_count",1),t=A.now(),i=Qe.default.setInterval(function(){if(t){var p=A.now();O(e.data,"view_waiting_rebuffer_duration",p-t),t=p}},250))},n=function(){e.disableRebufferTracking||t&&(O(e.data,"view_waiting_rebuffer_duration",A.now()-t),t=!1,Qe.default.clearInterval(i))},o=!1,s=function(){o=!0},u=function(){o=!1,n()};e.on("waiting",function(){o&&a()}),e.on("playing",function(){n(),s()}),e.on("pause",u),e.on("seeking",u)},Yt=ka;var xa=function r(e){"use strict";var t=this;D(this,r),l(this,"lastWallClockTime",void 0);var i=function(){t.lastWallClockTime=A.now(),e.on("before*",a)},a=function(n){var o=A.now(),s=t.lastWallClockTime;t.lastWallClockTime=o,o-s>3e4&&(e.emit("devicesleep",{viewer_time:s}),Object.assign(e.data,{viewer_time:s}),e.send("devicesleep"),e.emit("devicewake",{viewer_time:o}),Object.assign(e.data,{viewer_time:o}),e.send("devicewake"))};e.one("playbackheartbeat",i),e.on("playbackheartbeatend",function(){e.off("before*",a),e.one("playbackheartbeat",i)})},Xt=xa;var Be=G(J());var ze=function(r){return r()}(function(){var r=function(){for(var i=0,a={};i<arguments.length;i++){var n=arguments[i];for(var o in n)a[o]=n[o]}return a};function e(t){function i(a,n,o){var s;if(typeof document!="undefined"){if(arguments.length>1){if(o=r({path:"/"},i.defaults,o),typeof o.expires=="number"){var u=new Date;u.setMilliseconds(u.getMilliseconds()+o.expires*864e5),o.expires=u}try{s=JSON.stringify(n),/^[\{\[]/.test(s)&&(n=s)}catch(T){}return t.write?n=t.write(n,a):n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),a=encodeURIComponent(String(a)),a=a.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),a=a.replace(/[\(\)]/g,escape),document.cookie=[a,"=",n,o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}a||(s={});for(var p=document.cookie?document.cookie.split("; "):[],b=/(%[0-9A-Z]{2})+/g,k=0;k<p.length;k++){var y=p[k].split("="),c=y.slice(1).join("=");c.charAt(0)==='"'&&(c=c.slice(1,-1));try{var v=y[0].replace(b,decodeURIComponent);if(c=t.read?t.read(c,v):t(c,v)||c.replace(b,decodeURIComponent),this.json)try{c=JSON.parse(c)}catch(T){}if(a===v){s=c;break}a||(s[v]=c)}catch(T){}}return s}}return i.set=i,i.get=function(a){return i.call(i,a)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(a,n){i(a,"",r(n,{expires:-1}))},i.withConverter=e,i}return e(function(){})});var $t="muxData",Da=function(r){return Object.entries(r).map(function(e){var t=H(e,2),i=t[0],a=t[1];return"".concat(i,"=").concat(a)}).join("&")},Sa=function(r){return r.split("&").reduce(function(e,t){var i=H(t.split("="),2),a=i[0],n=i[1],o=+n,s=n&&o==n?o:n;return e[a]=s,e},{})},Zt=function(){var e;try{e=Sa(ze.get($t)||"")}catch(t){e={}}return e},er=function(e){try{ze.set($t,Da(e),{expires:365})}catch(t){}},tr=function(){var e=Zt();return e.mux_viewer_id=e.mux_viewer_id||ee(),e.msn=e.msn||Math.random(),er(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}},rr=function(){var e=Zt(),t=A.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=ee(),e.sst=t),e.sex=t+25*60*1e3,er(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}};function Ke(r,e){var t=e.beaconCollectionDomain,i=e.beaconDomain;if(t)return"https://"+t;r=r||"inferred";var a=i||"litix.io";return r.match(/^[a-z0-9]+$/)?"https://"+r+"."+a:"https://img.litix.io/a.gif"}var ar=G(J()),ir=function(){var e;switch(nr()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},nr=function(){var e=ar.default.navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};ir.getConnectionFromAPI=nr;var or=ir;var Ra={a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"},qa=ur(Ra),Aa={ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"},sr=ur(Aa);function ur(r){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);return e}function ve(r){var e={},t={};return Object.keys(r).forEach(function(i){var a=!1;if(r.hasOwnProperty(i)&&r[i]!==void 0){var n=i.split("_"),o=n[0],s=qa[o];s||(q.info("Data key word `"+n[0]+"` not expected in "+i),s=o+"_"),n.splice(1).forEach(function(u){u==="url"&&(a=!0),sr[u]?s+=sr[u]:Number(u)&&Math.floor(Number(u))===Number(u)?s+=u:(q.info("Data key word `"+u+"` not expected in "+i),s+="_"+u+"_")}),a?t[s]=r[i]:e[s]=r[i]}}),Object.assign(e,t)}var ae=G(J());var Oa={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},Ia=56*1024,Pa=["hb","requestcompleted","requestfailed","requestcanceled"],Na="https://img.litix.io",$=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._beaconUrl=e||Na,this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},Oa,t)};$.prototype.queueEvent=function(r,e){var t=Object.assign({},e);return this._eventQueue.length<=this._options.maxQueueLength||r==="eventrateexceeded"?(this._eventQueue.push(t),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):!1};$.prototype.flushEvents=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(r&&this._eventQueue.length===1){this._eventQueue.pop();return}this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()};$.prototype.destroy=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.destroyed=!0,r?this._clearBeaconQueue():this.flushEvents(),ae.default.clearTimeout(this._sendTimeout)};$.prototype._clearBeaconQueue=function(){var r=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,e=this._eventQueue.slice(r);r>0&&Object.assign(e[e.length-1],ve({mux_view_message:"event queue truncated"}));var t=this._createPayload(e);dr(this._beaconUrl,t,!0,function(){})};$.prototype._sendBeaconQueue=function(){var r=this;if(!this._postInFlight){var e=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var t=this._createPayload(e),i=A.now();dr(this._beaconUrl,t,!1,function(a,n){n?(r._eventQueue=e.concat(r._eventQueue),r._failureCount+=1,q.info("Error sending beacon: "+n)):r._failureCount=0,r._roundTripTime=A.now()-i,r._postInFlight=!1})}};$.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var r=Math.pow(2,this._failureCount-1);return r=r*Math.random(),(1+r)*this._options.baseTimeBetweenBeacons};$.prototype._startBeaconSending=function(){var r=this;ae.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=ae.default.setTimeout(function(){r._eventQueue.length&&r._sendBeaconQueue(),r._startBeaconSending()},this._getNextBeaconTime()))};$.prototype._createPayload=function(r){var e=this,t={transmission_timestamp:Math.round(A.now())};this._roundTripTime&&(t.rtt_ms=Math.round(this._roundTripTime));var i,a,n,o=function(){i=JSON.stringify({metadata:t,events:a||r}),n=i.length/1024},s=function(){return n<=e._options.maxPayloadKBSize};return o(),s()||(q.info("Payload size is too big ("+n+" kb). Removing unnecessary events."),a=r.filter(function(u){return Pa.indexOf(u.e)===-1}),o()),s()||(q.info("Payload size still too big ("+n+" kb). Cropping fields.."),a.forEach(function(u){for(var p in u){var b=u[p],k=50*1024;typeof b=="string"&&b.length>k&&(u[p]=b.substring(0,k))}}),o()),i};var La=function(r){return r.length<=Ia},dr=function(r,e,t,i){if(t&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(r,e)){i();return}if(ae.default.fetch){ae.default.fetch(r,{method:"POST",body:e,headers:{"Content-Type":"text/plain"},keepalive:La(e)}).then(function(n){return i(null,n.ok?null:"Error")}).catch(function(n){return i(null,n)});return}if(ae.default.XMLHttpRequest){var a=new ae.default.XMLHttpRequest;a.onreadystatechange=function(){if(a.readyState===4)return i(null,a.status!==200?"error":void 0)},a.open("POST",r),a.setRequestHeader("Content-Type","text/plain"),a.send(e);return}i()},lr=$;var Ca=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],Ma=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],Ha=["ad_id","ad_creative_id","ad_universal_id"],Ba=["viewstart","error","ended","viewend"],Ua=10*60*1e3,cr=function(){"use strict";function r(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};D(this,r);var a,n,o,s,u,p,b,k,y,c,v,T;l(this,"mux",void 0),l(this,"envKey",void 0),l(this,"options",void 0),l(this,"eventQueue",void 0),l(this,"sampleRate",void 0),l(this,"disableCookies",void 0),l(this,"respectDoNotTrack",void 0),l(this,"previousBeaconData",void 0),l(this,"lastEventTime",void 0),l(this,"rateLimited",void 0),l(this,"pageLevelData",void 0),l(this,"viewerData",void 0),this.mux=e,this.envKey=t,this.options=i,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new lr(Ke(this.envKey,this.options));var x;this.sampleRate=(x=this.options.sampleRate)!==null&&x!==void 0?x:1;var m;this.disableCookies=(m=this.options.disableCookies)!==null&&m!==void 0?m:!1;var f;this.respectDoNotTrack=(f=this.options.respectDoNotTrack)!==null&&f!==void 0?f:!1,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:(a=this.options.platform)===null||a===void 0?void 0:a.name,viewer_application_version:(n=this.options.platform)===null||n===void 0?void 0:n.version,viewer_application_engine:(o=this.options.platform)===null||o===void 0?void 0:o.layout,viewer_device_name:(s=this.options.platform)===null||s===void 0?void 0:s.product,viewer_device_category:"",viewer_device_manufacturer:(u=this.options.platform)===null||u===void 0?void 0:u.manufacturer,viewer_os_family:(b=this.options.platform)===null||b===void 0||(p=b.os)===null||p===void 0?void 0:p.family,viewer_os_architecture:(y=this.options.platform)===null||y===void 0||(k=y.os)===null||k===void 0?void 0:k.architecture,viewer_os_version:(v=this.options.platform)===null||v===void 0||(c=v.os)===null||c===void 0?void 0:c.version,viewer_connection_type:or(),page_url:Be.default===null||Be.default===void 0||(T=Be.default.location)===null||T===void 0?void 0:T.href},this.viewerData=this.disableCookies?{}:tr()}return L(r,[{key:"send",value:function(t,i){if(!(!t||!(i!=null&&i.view_id))){if(this.respectDoNotTrack&&ce())return q.info("Not sending `"+t+"` because Do Not Track is enabled");if(!i||typeof i!="object")return q.error("A data object was expected in send() but was not provided");var a=this.disableCookies?{}:rr(),n=fe(ue({},this.pageLevelData,i,a,this.viewerData),{event:t,env_key:this.envKey});n.user_id&&(n.viewer_user_id=n.user_id,delete n.user_id);var o,s=((o=n.mux_sample_number)!==null&&o!==void 0?o:0)>=this.sampleRate,u=this._deduplicateBeaconData(t,n),p=ve(u);if(this.lastEventTime=this.mux.utils.now(),s)return q.info("Not sending event due to sample rate restriction",t,n,p);if(this.envKey||q.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",t,n,p),!this.rateLimited){if(q.info("Sending event",t,n,p),this.rateLimited=!this.eventQueue.queueEvent(t,p),this.mux.WINDOW_UNLOADING&&t==="viewend")this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&t==="hb"?this.eventQueue.flushEvents(!0):Ba.indexOf(t)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return n.event="eventrateexceeded",p=ve(n),this.eventQueue.queueEvent(n.event,p),q.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(t,i){var a=this,n={},o=i.view_id;if(o==="-1"||t==="viewstart"||t==="viewend"||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=Ua)n=ue({},i),o&&(this.previousBeaconData=n),o&&t==="viewend"&&(this.previousBeaconData=null);else{var s=t.indexOf("request")===0;Object.entries(i).forEach(function(u){var p=H(u,2),b=p[0],k=p[1];a.previousBeaconData&&(k!==a.previousBeaconData[b]||Ca.indexOf(b)>-1||a.objectHasChanged(s,b,k,a.previousBeaconData[b])||a.eventRequiresKey(t,b))&&(n[b]=k,a.previousBeaconData[b]=k)})}return n}},{key:"objectHasChanged",value:function(t,i,a,n){return!t||i.indexOf("request_")!==0?!1:i==="request_response_headers"||typeof a!="object"||typeof n!="object"?!0:Object.keys(a||{}).length!==Object.keys(n||{}).length}},{key:"eventRequiresKey",value:function(t,i){return!!(t==="renditionchange"&&i.indexOf("video_source_")===0||Ha.includes(i)&&Ma.includes(t))}}]),r}();var Fa=function r(e){"use strict";D(this,r);var t=0,i=0,a=0,n=0,o=0,s=0,u=0,p=function(y,c){var v=c.request_start,T=c.request_response_start,x=c.request_response_end,m=c.request_bytes_loaded;n++;var f,_;if(T?(f=T-(v!=null?v:0),_=(x!=null?x:0)-T):_=(x!=null?x:0)-(v!=null?v:0),_>0&&m&&m>0){var d=m/_*8e3;o++,i+=m,a+=_,e.data.view_min_request_throughput=Math.min(e.data.view_min_request_throughput||1/0,d),e.data.view_average_request_throughput=i/a*8e3,e.data.view_request_count=n,f>0&&(t+=f,e.data.view_max_request_latency=Math.max(e.data.view_max_request_latency||0,f),e.data.view_average_request_latency=t/o)}},b=function(y,c){n++,s++,e.data.view_request_count=n,e.data.view_request_failed_count=s},k=function(y,c){n++,u++,e.data.view_request_count=n,e.data.view_request_canceled_count=u};e.on("requestcompleted",p),e.on("requestfailed",b),e.on("requestcanceled",k)},_r=Fa;var Va=60*60*1e3,Wa=function r(e){"use strict";var t=this;D(this,r),l(this,"_lastEventTime",void 0),e.on("before*",function(i,a){var n=a.viewer_time,o=A.now(),s=t._lastEventTime;if(t._lastEventTime=o,s&&o-s>Va){var u=Object.keys(e.data).reduce(function(b,k){return k.indexOf("video_")===0?Object.assign(b,l({},k,e.data[k])):b},{});e.mux.log.info("Received event after at least an hour inactivity, creating a new view");var p=e.playbackHeartbeat._playheadShouldBeProgressing;e._resetView(Object.assign({viewer_time:n},u)),e.playbackHeartbeat._playheadShouldBeProgressing=p,e.playbackHeartbeat._playheadShouldBeProgressing&&i.type!=="play"&&i.type!=="adbreakstart"&&(e.emit("play",{viewer_time:n}),i.type!=="playing"&&e.emit("playing",{viewer_time:n}))}})},fr=Wa;var ja=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],Ga=new Set(["requestcompleted","requestfailed","requestcanceled"]),Ja=function(r){"use strict";xt(t,r);var e=Rt(t);function t(i,a,n){D(this,t);var o;o=e.call(this),l(g(o),"DOM_CONTENT_LOADED_EVENT_END",void 0),l(g(o),"NAVIGATION_START",void 0),l(g(o),"_destroyed",void 0),l(g(o),"_heartBeatTimeout",void 0),l(g(o),"adTracker",void 0),l(g(o),"dashjs",void 0),l(g(o),"data",void 0),l(g(o),"disablePlayheadRebufferTracking",void 0),l(g(o),"disableRebufferTracking",void 0),l(g(o),"errorTracker",void 0),l(g(o),"errorTranslator",void 0),l(g(o),"emitTranslator",void 0),l(g(o),"getAdData",void 0),l(g(o),"getPlayheadTime",void 0),l(g(o),"getStateData",void 0),l(g(o),"stateDataTranslator",void 0),l(g(o),"hlsjs",void 0),l(g(o),"id",void 0),l(g(o),"longResumeTracker",void 0),l(g(o),"minimumRebufferDuration",void 0),l(g(o),"mux",void 0),l(g(o),"playbackEventDispatcher",void 0),l(g(o),"playbackHeartbeat",void 0),l(g(o),"playbackHeartbeatTime",void 0),l(g(o),"playheadTime",void 0),l(g(o),"seekingTracker",void 0),l(g(o),"sustainedRebufferThreshold",void 0),l(g(o),"watchTimeTracker",void 0),l(g(o),"currentFragmentPDT",void 0),l(g(o),"currentFragmentStart",void 0),o.DOM_CONTENT_LOADED_EVENT_END=_e.domContentLoadedEventEnd(),o.NAVIGATION_START=_e.navigationStart();var s={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(y){return y},emitTranslator:function(){for(var y=arguments.length,c=new Array(y),v=0;v<y;v++)c[v]=arguments[v];return c},stateDataTranslator:function(y){return y}};o.mux=i,o.id=a,n!=null&&n.beaconDomain&&o.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),n=Object.assign(s,n),n.data=n.data||{},n.data.property_key&&(n.data.env_key=n.data.property_key,delete n.data.property_key),q.level=n.debug?Y.DEBUG:Y.WARN,o.getPlayheadTime=n.getPlayheadTime,o.getStateData=n.getStateData||function(){return{}},o.getAdData=n.getAdData||function(){},o.minimumRebufferDuration=n.minimumRebufferDuration,o.sustainedRebufferThreshold=n.sustainedRebufferThreshold,o.playbackHeartbeatTime=n.playbackHeartbeatTime,o.disableRebufferTracking=n.disableRebufferTracking,o.disableRebufferTracking&&o.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),o.disablePlayheadRebufferTracking=n.disablePlayheadRebufferTracking,o.errorTranslator=n.errorTranslator,o.emitTranslator=n.emitTranslator,o.stateDataTranslator=n.stateDataTranslator,o.playbackEventDispatcher=new cr(i,n.data.env_key,n),o.data={player_instance_id:ee(),mux_sample_rate:n.sampleRate,beacon_domain:n.beaconCollectionDomain||n.beaconDomain},o.data.view_sequence_number=1,o.data.player_sequence_number=1;var u=function(){typeof this.data.view_start=="undefined"&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(g(o));if(o.on("viewinit",function(y,c){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,c),this._initializeViewData(),this.one("play",u),this.one("adbreakstart",u)}),o.on("videochange",function(y,c){this._resetView(c)}),o.on("programchange",function(y,c){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(c,{view_program_changed:!0})),u(),this.emit("play"),this.emit("playing")}),o.on("fragmentchange",function(y,c){this.currentFragmentPDT=c.currentFragmentPDT,this.currentFragmentStart=c.currentFragmentStart}),o.on("destroy",o.destroy),typeof window!="undefined"&&typeof window.addEventListener=="function"&&typeof window.removeEventListener=="function"){var p=function(){var y=typeof o.data.view_start!="undefined";o.mux.WINDOW_HIDDEN=document.visibilityState==="hidden",y&&o.mux.WINDOW_HIDDEN&&(o.data.player_is_paused||o.emit("hb"))};window.addEventListener("visibilitychange",p,!1);var b=function(y){y.persisted||o.destroy()};window.addEventListener("pagehide",b,!1),o.on("destroy",function(){window.removeEventListener("visibilitychange",p),window.removeEventListener("pagehide",b)})}o.on("playerready",function(y,c){Object.assign(this.data,c)}),ja.forEach(function(y){o.on(y,function(c,v){y.indexOf("ad")!==0&&this._updateStateData(),Object.assign(this.data,v),this._sanitizeData()}),o.on("after"+y,function(){(y!=="error"||this.errorTracker.viewErrored)&&this.send(y)})}),o.on("viewend",function(y,c){Object.assign(o.data,c)});var k=function(c){var v=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=v-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time};return o.one("playerready",k),o.longResumeTracker=new fr(g(o)),o.errorTracker=new Ht(g(o)),new Xt(g(o)),o.seekingTracker=new Qt(g(o)),o.playheadTime=new Ft(g(o)),o.playbackHeartbeat=new Mt(g(o)),new Jt(g(o)),o.watchTimeTracker=new Bt(g(o)),new Ut(g(o)),o.adTracker=new Kt(g(o)),new jt(g(o)),new Wt(g(o)),new Gt(g(o)),new Yt(g(o)),new _r(g(o)),n.hlsjs&&o.addHLSJS(n),n.dashjs&&o.addDashJS(n),o.emit("viewinit",n.data),o}return L(t,[{key:"emit",value:function(a,n){var o,s=Object.assign({viewer_time:this.mux.utils.now()},n),u=[a,s];if(this.emitTranslator)try{u=this.emitTranslator(a,s)}catch(p){this.mux.log.warn("Exception in emit translator callback.",p)}u!=null&&u.length&&(o=De(X(t.prototype),"emit",this)).call.apply(o,[this].concat(V(u)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,typeof this.data.view_start!="undefined"&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(a){if(this.data.view_id){var n=Object.assign({},this.data),o=["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"];if(n.video_source_is_live===void 0&&(n.player_source_duration===1/0||n.video_source_duration===1/0?n.video_source_is_live=!0:(n.player_source_duration>0||n.video_source_duration>0)&&(n.video_source_is_live=!1)),n.video_source_is_live||o.forEach(function(b){n[b]=void 0}),n.video_source_url=n.video_source_url||n.player_source_url,n.video_source_url){var s=H(re(n.video_source_url),2),u=s[0],p=s[1];n.video_source_domain=p,n.video_source_hostname=u}delete n.ad_request_id,this.playbackEventDispatcher.send(a,n),this.data.view_sequence_number++,this.data.player_sequence_number++,Ga.has(a)||this._restartHeartBeat(),a==="viewend"&&delete this.data.view_id}}},{key:"_resetView",value:function(a){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",a)}},{key:"_updateStateData",value:function(){var a=this.getStateData();if(typeof this.stateDataTranslator=="function")try{a=this.stateDataTranslator(a)}catch(n){this.mux.log.warn("Exception in stateDataTranslator translator callback.",n)}Object.assign(this.data,a),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var a=this,n=["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"];n.forEach(function(s){var u=parseInt(a.data[s],10);a.data[s]=isNaN(u)?void 0:u});var o=["player_source_url","video_source_url"];o.forEach(function(s){if(a.data[s]){var u=a.data[s].toLowerCase();(u.indexOf("data:")===0||u.indexOf("blob:")===0)&&(a.data[s]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var a=this;Object.keys(this.data).forEach(function(n){n.indexOf("video_")===0&&delete a.data[n]})}},{key:"_resetViewData",value:function(){var a=this;Object.keys(this.data).forEach(function(n){n.indexOf("view_")===0&&delete a.data[n]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var a=this,n=this.data.view_id=ee(),o=function(){n===a.data.view_id&&O(a.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",o):o()}},{key:"_restartHeartBeat",value:function(){var a=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){a.data.player_is_paused||a.emit("hb")},1e4)}},{key:"addHLSJS",value:function(a){if(!a.hlsjs){this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.");return}if(this.hlsjs){this.mux.log.warn("An instance of HLS.js is already being monitored for this player.");return}this.hlsjs=a.hlsjs,At(this.mux,this.id,a.hlsjs,{},a.Hls||window.Hls)}},{key:"removeHLSJS",value:function(){this.hlsjs&&(Ot(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(a){if(!a.dashjs){this.mux.log.warn("You must pass a valid dashjs instance in order to track it.");return}if(this.dashjs){this.mux.log.warn("An instance of Dash.js is already being monitored for this player.");return}this.dashjs=a.dashjs,Pt(this.mux,this.id,a.dashjs)}},{key:"removeDashJS",value:function(){this.dashjs&&(Nt(this.dashjs),this.dashjs=void 0)}}]),t}(Ct),pr=Ja;var he=G(Ur());function nt(){return he.default&&!!(he.default.fullscreenElement||he.default.webkitFullscreenElement||he.default.mozFullScreenElement||he.default.msFullscreenElement)}var yi=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],gi={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};function ot(r,e,t){var i=H(se(e),3),a=i[0],n=i[1],o=i[2],s=r.log,u=r.utils.getComputedStyle,p=r.utils.secondsToMs,b={automaticErrorTracking:!0};if(a){if(o!=="video"&&o!=="audio")return s.error("The element of `"+n+"` was not a media element.")}else return s.error("No element was found with the `"+n+"` query selector.");a.mux&&(a.mux.destroy(),delete a.mux,s.warn("Already monitoring this video element, replacing existing event listeners"));var k={getPlayheadTime:function(){return p(a.currentTime)},getStateData:function(){var v,T,x,m=((v=(T=this).getPlayheadTime)===null||v===void 0?void 0:v.call(T))||p(a.currentTime),f=this.hlsjs&&this.hlsjs.url,_=this.dashjs&&typeof this.dashjs.getSource=="function"&&this.dashjs.getSource(),d={player_is_paused:a.paused,player_width:parseInt(u(a,"width")),player_height:parseInt(u(a,"height")),player_autoplay_on:a.autoplay,player_preload_on:a.preload,player_language_code:a.lang,player_is_fullscreen:nt(),video_poster_url:a.poster,video_source_url:f||_||a.currentSrc,video_source_duration:p(a.duration),video_source_height:a.videoHeight,video_source_width:a.videoWidth,view_dropped_frame_count:a==null||(x=a.getVideoPlaybackQuality)===null||x===void 0?void 0:x.call(a).droppedVideoFrames};if(a.getStartDate&&m>0){var h=a.getStartDate();if(h&&typeof h.getTime=="function"&&h.getTime()){var w=h.getTime();if(d.player_program_time=w+m,a.seekable.length>0){var E=w+a.seekable.end(a.seekable.length-1);d.player_live_edge_program_time=E}}}return d}};t=Object.assign(b,t,k),t.data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:r.VERSION},t.data),a.mux=a.mux||{},a.mux.deleted=!1,a.mux.emit=function(c,v){r.emit(n,c,v)},a.mux.updateData=function(c){a.mux.emit("hb",c)};var y=function(){s.error("The monitor for this video element has already been destroyed.")};a.mux.destroy=function(){Object.keys(a.mux.listeners).forEach(function(c){a.removeEventListener(c,a.mux.listeners[c],!1)}),delete a.mux.listeners,a.mux.destroy=y,a.mux.swapElement=y,a.mux.emit=y,a.mux.addHLSJS=y,a.mux.addDashJS=y,a.mux.removeHLSJS=y,a.mux.removeDashJS=y,a.mux.updateData=y,a.mux.setEmitTranslator=y,a.mux.setStateDataTranslator=y,a.mux.setGetPlayheadTime=y,a.mux.deleted=!0,r.emit(n,"destroy")},a.mux.swapElement=function(c){var v=H(se(c),3),T=v[0],x=v[1],m=v[2];if(T){if(m!=="video"&&m!=="audio")return r.log.error("The element of `"+x+"` was not a media element.")}else return r.log.error("No element was found with the `"+x+"` query selector.");T.muxId=a.muxId,delete a.muxId,T.mux=T.mux||{},T.mux.listeners=Object.assign({},a.mux.listeners),delete a.mux.listeners,Object.keys(T.mux.listeners).forEach(function(f){a.removeEventListener(f,T.mux.listeners[f],!1),T.addEventListener(f,T.mux.listeners[f],!1)}),T.mux.swapElement=a.mux.swapElement,T.mux.destroy=a.mux.destroy,delete a.mux,a=T},a.mux.addHLSJS=function(c){r.addHLSJS(n,c)},a.mux.addDashJS=function(c){r.addDashJS(n,c)},a.mux.removeHLSJS=function(){r.removeHLSJS(n)},a.mux.removeDashJS=function(){r.removeDashJS(n)},a.mux.setEmitTranslator=function(c){r.setEmitTranslator(n,c)},a.mux.setStateDataTranslator=function(c){r.setStateDataTranslator(n,c)},a.mux.setGetPlayheadTime=function(c){c||(c=t.getPlayheadTime),r.setGetPlayheadTime(n,c)},r.init(n,t),r.emit(n,"playerready"),a.paused||(r.emit(n,"play"),a.readyState>2&&r.emit(n,"playing")),a.mux.listeners={},yi.forEach(function(c){c==="error"&&!t.automaticErrorTracking||(a.mux.listeners[c]=function(){var v={};if(c==="error"){if(!a.error||a.error.code===1)return;v.player_error_code=a.error.code,v.player_error_message=gi[a.error.code]||a.error.message}r.emit(n,c,v)},a.addEventListener(c,a.mux.listeners[c],!1))})}function st(r,e,t,i){var a=i;if(r&&typeof r[e]=="function")try{a=r[e].apply(r,t)}catch(n){q.info("safeCall error",n)}return a}var ge=G(J()),ye;ge.default&&ge.default.WeakMap&&(ye=new WeakMap);function ut(r,e){if(!r||!e||!ge.default||typeof ge.default.getComputedStyle!="function")return"";var t;return ye&&ye.has(r)&&(t=ye.get(r)),t||(t=ge.default.getComputedStyle(r,null),ye&&ye.set(r,t)),t.getPropertyValue(e)}function dt(r){return Math.floor(r*1e3)}var le={TARGET_DURATION:"#EXT-X-TARGETDURATION",PART_INF:"#EXT-X-PART-INF",SERVER_CONTROL:"#EXT-X-SERVER-CONTROL",INF:"#EXTINF",PROGRAM_DATE_TIME:"#EXT-X-PROGRAM-DATE-TIME",VERSION:"#EXT-X-VERSION",SESSION_DATA:"#EXT-X-SESSION-DATA"},Fe=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};Fe.prototype.process=function(r){var e;for(this.buffer+=r,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)};Fe.prototype.processLine=function(r){var e=r.indexOf(":"),t=Ei(r,e),i=t[0],a=t.length===2?ct(t[1]):void 0;if(i[0]!=="#")this.currentUri.uri=i,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(i){case le.TARGET_DURATION:{if(!isFinite(a)||a<0)return;this.manifest.targetDuration=a,this.setHoldBack();break}case le.PART_INF:{lt(this.manifest,t),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break}case le.SERVER_CONTROL:{lt(this.manifest,t),this.setHoldBack();break}case le.INF:{a===0?this.currentUri.duration=.01:a>0&&(this.currentUri.duration=a);break}case le.PROGRAM_DATE_TIME:{var n=a,o=new Date(n);this.manifest.dateTimeString||(this.manifest.dateTimeString=n,this.manifest.dateTimeObject=o),this.currentUri.dateTimeString=n,this.currentUri.dateTimeObject=o;break}case le.VERSION:{lt(this.manifest,t);break}case le.SESSION_DATA:{var s=ki(t[1]),u=Ce(s);Object.assign(this.manifest.sessionData,u)}}};Fe.prototype.setHoldBack=function(){var r=this.manifest,e=r.serverControl,t=r.targetDuration,i=r.partTargetDuration;if(e){var a="holdBack",n="partHoldBack",o=t&&t*3,s=i&&i*2;t&&!e.hasOwnProperty(a)&&(e[a]=o),o&&e[a]<o&&(e[a]=o),i&&!e.hasOwnProperty(n)&&(e[n]=i*3),i&&e[n]<s&&(e[n]=s)}};var lt=function(r,e){var t=Fr(e[0].replace("#EXT-X-","")),i;wi(e[1])?(i={},i=Object.assign(Ti(e[1]),i)):i=ct(e[1]),r[t]=i},Fr=function(r){return r.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},ct=function(r){if(r.toLowerCase()==="yes"||r.toLowerCase()==="no")return r.toLowerCase()==="yes";var e=r.indexOf(":")!==-1?r:parseFloat(r);return isNaN(e)?r:e},bi=function(r){var e={},t=r.split("=");if(t.length>1){var i=Fr(t[0]);e[i]=ct(t[1])}return e},Ti=function(r){for(var e=r.split(","),t={},i=0;e.length>i;i++){var a=e[i],n=bi(a);t=Object.assign(n,t)}return t},wi=function(r){return r.indexOf("=")>-1},Ei=function(r,e){return e===-1?[r]:[r.substring(0,e),r.substring(e+1)]},ki=function(r){var e={};if(r){var t=r.search(","),i=r.slice(0,t),a=r.slice(t+1),n=[i,a];return n.forEach(function(o,s){for(var u=o.replace(/['"]+/g,"").split("="),p=0;p<u.length;p++)u[p]==="DATA-ID"&&(e["DATA-ID"]=u[1-p]),u[p]==="VALUE"&&(e.VALUE=u[1-p])}),{data:e}}},Vr=Fe;var xi={safeCall:st,safeIncrement:O,getComputedStyle:ut,secondsToMs:dt,assign:Object.assign,headersStringToObject:pe,cdnHeadersToRequestId:de,extractHostnameAndDomain:re,extractHostname:F,manifestParser:Vr,generateShortID:Oe,generateUUID:ee,now:A.now,findMediaElement:se},Wr=xi;var Di={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},jr=Di;var Si="mux-embed",Ri="5.5.0",qi="2.1",C={},ne=function(e){var t=arguments;typeof e=="string"?ne.hasOwnProperty(e)?be.default.setTimeout(function(){t=Array.prototype.splice.call(t,1),ne[e].apply(null,t)},0):q.warn("`"+e+"` is an unknown task"):typeof e=="function"?be.default.setTimeout(function(){e(ne)},0):q.warn("`"+e+"` is invalid.")},Ai={loaded:A.now(),NAME:Si,VERSION:Ri,API_VERSION:qi,PLAYER_TRACKED:!1,monitor:function(e,t){return ot(ne,e,t)},destroyMonitor:function(e){var t=H(se(e),1),i=t[0];i&&i.mux&&typeof i.mux.destroy=="function"?i.mux.destroy():q.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var i=Q(e);C[i]?C[i].addHLSJS(t):q.error("A monitor for `"+i+"` has not been initialized.")},addDashJS:function(e,t){var i=Q(e);C[i]?C[i].addDashJS(t):q.error("A monitor for `"+i+"` has not been initialized.")},removeHLSJS:function(e){var t=Q(e);C[t]?C[t].removeHLSJS():q.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=Q(e);C[t]?C[t].removeDashJS():q.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){ce()&&t&&t.respectDoNotTrack&&q.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var i=Q(e);C[i]=new pr(ne,i,t)},emit:function(e,t,i){var a=Q(e);C[a]?(C[a].emit(t,i),t==="destroy"&&delete C[a]):q.error("A monitor for `"+a+"` has not been initialized.")},updateData:function(e,t){var i=Q(e);C[i]?C[i].emit("hb",t):q.error("A monitor for `"+i+"` has not been initialized.")},setEmitTranslator:function(e,t){var i=Q(e);C[i]?C[i].emitTranslator=t:q.error("A monitor for `"+i+"` has not been initialized.")},setStateDataTranslator:function(e,t){var i=Q(e);C[i]?C[i].stateDataTranslator=t:q.error("A monitor for `"+i+"` has not been initialized.")},setGetPlayheadTime:function(e,t){var i=Q(e);C[i]?C[i].getPlayheadTime=t:q.error("A monitor for `"+i+"` has not been initialized.")},checkDoNotTrack:ce,log:q,utils:Wr,events:jr,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(ne,Ai);typeof be.default!="undefined"&&typeof be.default.addEventListener=="function"&&be.default.addEventListener("pagehide",function(r){r.persisted||(ne.WINDOW_UNLOADING=!0)},!1);var wd=ne;export{wd as default};
/*!
* JavaScript Cookie v2.1.3
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/
